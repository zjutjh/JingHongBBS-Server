(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1145:function(e,t,n){"use strict";n.r(t);n(32);var r=n(8),o=(n(51),n(5)),head=n(733),c=n.n(head),d=n(732),f=n.n(d),l=n(793),m=n.n(l),h={name:"Findpwd",mixins:[c.a,m.a,f.a],data:function(){return{title:"".concat(this.$t("modify.forgetPassword"),"  ").concat(this.$t("modify.retrievePassword")),phoneNumber:"",isVerifyDisabled:!0,canCountDown:!1,countDownSecond:60,loading:!1,verifyCode:"",newPassword:"",newPasswordRepeat:"",username:"",validate:!1,code:"",site_mode:"",isPaid:!1}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},mounted:function(){var e=this.$route.query,t=e.validate,n=e.register,code=e.code;t&&(this.validate=JSON.parse(t)),n&&(this.register=JSON.parse(n)),"undefined"!==code&&(this.code=code),this.forums&&this.forums.set_site&&this.forums.set_site.site_mode&&(this.site_mode=this.forums.set_site.site_mode),this.forums&&this.forums.set_reg&&(this.validate=this.forums.set_reg.register_validate)},methods:{onInput:function(e){this.phoneNumber=e.target.value.replace(/[^\d]/g,""),this.isVerifyDisabled=11!==this.phoneNumber.length},countDown:function(e){var t=this;this.canCountDown=!0,this.countDownSecond=e;var n=setInterval((function(){t.countDownSecond-=1,0===t.countDownSecond&&(t.canCountDown=!1,clearInterval(n))}),1e3)},sendVerifyCode:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={_jv:{type:"sms/send"},mobile:e.phoneNumber,type:"reset_pwd"},t.next=3,e.checkCaptcha(n);case 3:n=t.sent,o.status.run((function(){return e.$store.dispatch("jv/post",n)})).then((function(t){t.interval&&e.countDown(t.interval)}),(function(t){var n=t.response.data.errors;if(n[0])return e.$message.error(n[0].detail[0])}));case 5:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;if(""===this.verifyCode)this.$message.error("验证码不能为空");else if(""===this.newPassword)this.$message.error("新密码不能为空");else if(""===this.newPasswordRepeat)this.$message.error("重复密码不能为空");else if(this.newPassword!==this.newPasswordRepeat)this.$message.error("二次密码输入不一致");else{var t={_jv:{type:"sms/verify"},mobile:this.phoneNumber,code:this.verifyCode,password:this.newPassword,type:"reset_pwd"};o.status.run((function(){return e.$store.dispatch("jv/post",t)})).then((function(t){window.localStorage.setItem("username",t.username),e.$router.push("/modify/resetpwdsuccess")}),(function(t){return e.handleError(t)}))}}}},w=(n(989),n(12)),component=Object(w.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-find-pwd"},[n("div",{staticClass:"title"},[e._v(" "+e._s(e.$t("modify.forgetPassword"))+"\\"+e._s(e.$t("modify.retrievePassword")))]),e._v(" "),n("div",{staticClass:"describe"},[e._v(" "+e._s(e.$t("modify.retrievePasswordByPhone")))]),e._v(" "),n("div",{staticClass:"retrieve-inputs"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],attrs:{maxlength:"11",type:"text",placeholder:e.$t("modify.placeEnterRegisteredPhone")},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}}),e._v(" "),e.canCountDown?n("button",{class:{disabled:e.canCountDown},attrs:{disabled:e.canCountDown}},[e._v(e._s(e.countDownSecond+e.$t("modify.retransmission")))]):n("button",{on:{click:e.sendVerifyCode}},[e._v("\n        "+e._s(e.$t("modify.sendVerifyCode"))+"\n      ")])]),e._v(" "),n("el-input",{attrs:{maxlength:"6",placeholder:e.$t("modify.placeEnterCode")},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}}),e._v(" "),n("el-input",{attrs:{placeholder:e.$t("modify.enterNew"),"show-password":""},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),e._v(" "),n("el-input",{attrs:{placeholder:e.$t("modify.resetrepeatpass"),"show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.newPasswordRepeat,callback:function(t){e.newPasswordRepeat=t},expression:"newPasswordRepeat"}})],1),e._v(" "),n("button",{staticClass:"submit",on:{click:e.submit}},[e._v(e._s(e.$t("modify.submit")))])])}),[],!1,null,"616e0f68",null);t.default=component.exports},733:function(e,t){e.exports={data:function(){return{title:"‎"}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},head:function(){return{title:"‎"!==this.title&&this.forums&&this.forums.set_site&&this.forums.set_site.site_name?"".concat(this.title," - ").concat(this.forums.set_site.site_name):this.title}}}},793:function(e,t,n){n(11);var r=n(797);e.exports={mixins:[r],computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},methods:{checkCaptcha:function(e){var t=this;return new Promise((function(n,r){if(t.forums&&t.forums.qcloud&&t.forums.qcloud.qcloud_captcha)return new TencentCaptcha(t.forums.qcloud.qcloud_captcha_app_id,(function(t){0===t.ret?(e.captcha_rand_str=t.randstr,e.captcha_ticket=t.ticket,n(e)):r(t)})).show();n(e)}))}}}},883:function(e,t,n){},989:function(e,t,n){"use strict";var r=n(883);n.n(r).a}}]);