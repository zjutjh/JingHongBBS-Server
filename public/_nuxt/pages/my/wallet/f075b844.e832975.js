(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1055:function(t,e,n){"use strict";var r=n(894);n.n(r).a},1056:function(t,e,n){"use strict";var r=n(895);n.n(r).a},1057:function(t,e,n){"use strict";var r=n(896);n.n(r).a},1058:function(t,e,n){"use strict";var r=n(897);n.n(r).a},1059:function(t,e,n){"use strict";var r=n(898);n.n(r).a},1060:function(t,e,n){"use strict";var r=n(899);n.n(r).a},1061:function(t,e,n){"use strict";var r=n(901);n.n(r).a},1062:function(t,e,n){"use strict";var r=n(902);n.n(r).a},1063:function(t,e,n){"use strict";var r=n(903);n.n(r).a},1064:function(t,e,n){"use strict";var r=n(904);n.n(r).a},1065:function(t,e,n){"use strict";var r=n(905);n.n(r).a},1119:function(t,e,n){"use strict";n.r(e);var r={name:"WalletPassword",props:{error:{type:Boolean,default:!1},passwordErrorTip:{type:String,default:""}},data:function(){return{}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},methods:{empty:function(){this.$refs.walletinput.deleat()},findpaypwd:function(){this.$emit("close"),this.$emit("findpaypwd")}}},o=(n(1056),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("message",{attrs:{title:t.$t("profile.editpaypassword")},on:{close:function(e){return t.$emit("close")}}},[n("div",{staticClass:"container"},[n("div",{staticClass:"block show-amount"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("profile.orignpassword")))]),t._v(" "),n("div",{staticClass:"amount"},[n("span",[t._v(t._s(t.$t("modify.editpasswordtip")))])])]),t._v(" "),n("div",{staticClass:"block input-password"},[n("wallet-password-input",{ref:"walletinput",attrs:{error:t.error},on:{password:function(e){return t.$emit("password",e)}}}),t._v(" "),t.error?n("div",{staticClass:"amount"},[t._v(t._s(t.passwordErrorTip?t.passwordErrorTip:t.$t("modify.passwordinputerro")))]):t._e()],1),t._v(" "),t.forums&&t.forums.qcloud&&t.forums.qcloud.qcloud_sms?n("div",{staticClass:"findpaypwd",on:{click:t.findpaypwd}},[t._v("\n      "+t._s(t.$t("modify.forgetpaypassword"))+"\n    ")]):t._e()])])}),[],!1,null,"54078ece",null);e.default=component.exports;installComponents(component,{WalletPasswordInput:n(862).default,Message:n(787).default})},1120:function(t,e,n){"use strict";n.r(e);var r={name:"SetNewPassword",props:{error:{type:Boolean,default:!1}},data:function(){return{}}},o=(n(1057),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("message",{attrs:{title:t.$t("profile.editpaypassword")},on:{close:function(e){return t.$emit("close")}}},[n("div",{staticClass:"container"},[n("div",{staticClass:"block show-amount"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("modify.newPayPwdTitle")))]),t._v(" "),n("div",{staticClass:"amount"},[n("span",[t._v(t._s(t.$t("modify.setpasswordtip")))])])]),t._v(" "),n("div",{staticClass:"block input-password"},[n("wallet-password-input",{attrs:{error:t.error},on:{password:function(e){return t.$emit("password",e)}}})],1)])])}),[],!1,null,"15a0d025",null);e.default=component.exports;installComponents(component,{WalletPasswordInput:n(862).default,Message:n(787).default})},1121:function(t,e,n){"use strict";n.r(e);var r={name:"RepeatNewpassword",props:{error:{type:Boolean,default:!1}},data:function(){return{}},methods:{empty:function(){this.$refs.walletinput.deleat()}}},o=(n(1058),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("message",{attrs:{title:t.$t("profile.editpaypassword")},on:{close:function(e){return t.$emit("close")}}},[n("div",{staticClass:"container"},[n("div",{staticClass:"block show-amount"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("modify.enterpaymentagin")))]),t._v(" "),n("div",{staticClass:"amount"},[n("span",[t._v(t._s(t.$t("modify.repeatpasstip")))])])]),t._v(" "),n("div",{staticClass:"block input-password"},[n("wallet-password-input",{ref:"walletinput",attrs:{error:t.error},on:{password:function(e){return t.$emit("password",e)}}}),t._v(" "),t.error?n("div",{staticClass:"amount"},[t._v(t._s(t.$t("modify.reenter")))]):t._e()],1)])])}),[],!1,null,"3201aa18",null);e.default=component.exports;installComponents(component,{WalletPasswordInput:n(862).default,Message:n(787).default})},1122:function(t,e,n){"use strict";n.r(e);var r={name:"SetPassword",props:{error:{type:Boolean,default:!1}},data:function(){return{}}},o=(n(1059),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("message",{attrs:{title:t.$t("profile.setpaypassword")},on:{close:function(e){return t.$emit("close")}}},[n("div",{staticClass:"container"},[n("div",{staticClass:"block show-amount"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("profile.setpaypassword")))]),t._v(" "),n("div",{staticClass:"amount"},[n("span",[t._v(t._s(t.$t("modify.setpasswordtip")))])])]),t._v(" "),n("div",{staticClass:"block input-password"},[n("wallet-password-input",{attrs:{error:t.error},on:{password:function(e){return t.$emit("password",e)}}})],1)])])}),[],!1,null,"69b6aca2",null);e.default=component.exports;installComponents(component,{WalletPasswordInput:n(862).default,Message:n(787).default})},1123:function(t,e,n){"use strict";n.r(e);var r={name:"RepeatPassword",props:{error:{type:Boolean,default:!1}},data:function(){return{}},methods:{empty:function(){this.$refs.walletinput.deleat()}}},o=(n(1060),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("message",{attrs:{title:t.$t("profile.editpaypassword")},on:{close:function(e){return t.$emit("close")}}},[n("div",{staticClass:"container"},[n("div",{staticClass:"block show-amount"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("modify.enterpaymentagin")))]),t._v(" "),n("div",{staticClass:"amount"},[n("span",[t._v(t._s(t.$t("modify.repeatpasstip")))])])]),t._v(" "),n("div",{staticClass:"block input-password"},[n("wallet-password-input",{ref:"walletinput",attrs:{error:t.error},on:{password:function(e){return t.$emit("password",e)}}}),t._v(" "),t.error?n("div",{staticClass:"amount"},[t._v(t._s(t.$t("modify.masstext")))]):t._e()],1)])])}),[],!1,null,"770c7882",null);e.default=component.exports;installComponents(component,{WalletPasswordInput:n(862).default,Message:n(787).default})},1124:function(t,e,n){"use strict";n.r(e);n(51),n(11),n(61);var r=n(5),o=n(742),l=n(732),c=n.n(l),d=n(900),f=n.n(d),h={name:"CashDialog",mixins:[c.a,f.a],data:function(){return{loading:!1,hasMore:!1,date:"",value:"",pageSize:10,pageNum:1,filterSelected:"",dataList:[],total:0,sumMoney:0,options:[{value:"",label:this.$t("profile.all")+this.$t("profile.type")},{value:"1",label:this.$t("profile.tobereviewed")},{value:"2",label:this.$t("profile.approved")},{value:"3",label:this.$t("profile.auditfailed")},{value:"4",label:this.$t("profile.paymenttobemade")},{value:"5",label:this.$t("profile.paymentsucceed")},{value:"6",label:this.$t("profile.paymentfailed")}],userId:this.$store.getters["session/get"]("userId"),userInfo:""}},mounted:function(){this.setCurrentTime(),this.getUserInfo(),this.getList()},methods:{getUserInfo:function(){this.userInfo=this.$store.state.user.info.attributes},getList:function(t){var e=this;this.loading=!0;var n=this.date.split("-"),o=new Date(n[0],n[1],0).getDate(),l={"filter[user]":this.userId,"page[number]":this.pageNum2,"page[limit]":this.pageSize2,"filter[start_time]":"".concat(this.date,"-01-00-00-00"),"filter[end_time]":"".concat(this.date,"-").concat(o,"-23-59-59")};t&&"filter"===t&&(l.pageNum=1,this.dataList=[]),""!==this.filterSelected&&(l["filter[cash_status]"]=this.filterSelected),r.status.run((function(){return e.$store.dispatch("jv/get",["wallet/cash",{params:l}])})).then((function(t){e.sumMoney=e.handlemoney(t),e.dataList=t,e.total=t._jv.json.meta.total}),(function(t){e.handleError(t)})).finally((function(){e.loading=!1}))},bindDateChange:function(t){this.date=t,null!==this.date&&this.getList("filter")},confirm:function(t){this.filterSelected=t,this.getList("filter")},handleSelectionChange:function(t){this.multipleSelection=t},dateFormat:function(t){return this.timeHandle(t.created_at)},timeHandle:function(time){return Object(o.b)(time)},statusFormat:function(t){switch(t.cash_status){case 1:return'<font style="color:#25A9F6">'.concat(this.$t("profile.tobereviewed"),"</font>");case 2:return'<font style="color:#09BB07">'.concat(this.$t("profile.approved"),"</font>");case 3:return'<font style="color:#FA5151">'.concat(this.$t("profile.auditfailed"),"</font>");case 4:return this.$t("profile.paymenttobemade");case 5:return this.$t("profile.paymentsucceed");case 6:return this.$t("profile.paymentfailed");default:return"未知状态"}},statusFormat2:function(t){switch(t.cash_status){case 1:return this.$t("profile.tobereviewed");case 2:return this.$t("profile.approved");case 3:return this.$t("profile.auditfailed");case 4:return this.$t("profile.paymenttobemade");case 5:return this.$t("profile.paymentsucceed");case 6:return this.$t("profile.paymentfailed");default:return"未知状态"}},handlemoney:function(t){var e=JSON.parse(JSON.stringify(t)),n=0;return e.forEach((function(t,r){e[r]=parseFloat(t.cash_apply_amount.replace(/\+|\-|\*|\?/g,"")),n+=e[r]})),n.toFixed(2)},handleSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.pageNum=t,this.getList()}}},m=(n(1061),n(12)),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cashDialog"},[n("div",{staticClass:"selector"},[n("el-date-picker",{attrs:{type:"month",placeholder:"选择月","suffix-icon":"el-icon-arrow",format:"yyyy 年 MM 月 ","value-format":"yyyy-MM"},on:{change:t.bindDateChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),n("el-select",{attrs:{placeholder:t.$t("profile.pleaseselect")},on:{change:t.confirm},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),n("span",{staticClass:"margleft"},[t._v("\n      "+t._s(t.$t("profile.total"))+t._s(t.total)+t._s(t.$t("profile.records"))+"\n      ")])],1),t._v(" "),t.total>0?n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList}},[n("el-table-column",{attrs:{type:"selection",width:"40"}}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"cash_status",label:t.$t("profile.desc"),formatter:t.statusFormat2},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"desc",domProps:{innerHTML:t._s(t.$xss(t.statusFormat2(e.row)))}})]}}],null,!1,5723653)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("profile.time"),width:"140",prop:"created_at",formatter:t.dateFormat}}),t._v(" "),n("el-table-column",{attrs:{prop:"cash_status",label:t.$t("profile.status"),width:"97",formatter:t.statusFormat},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{innerHTML:t._s(t.$xss(t.statusFormat(e.row)))}})]}}],null,!1,3765784326)}),t._v(" "),n("el-table-column",{attrs:{prop:"cash_apply_amount",label:t.$t("pay.sumOfMoney"),width:"113",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"font-size":"16px"},domProps:{innerHTML:t._s(t.$xss(e.row.cash_apply_amount))}})]}}],null,!1,4017059246)})],1),t._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{background:"","pager-count":5,"current-page":t.pageNum,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):[t.hasMore?n("div",{staticClass:"load-more",on:{click:t.loadMore}},[t._v(t._s(t.$t("topic.showMore")))]):n("div",{staticClass:"no-more"},[0===t.dataList.length?n("svg-icon",{staticClass:"empty-icon",attrs:{type:"empty"}}):t._e(),t._v(t._s(t.dataList.length>0?t.$t("discuzq.list.noMoreData"):t.$t("discuzq.list.noData"))+"\n    ")],1)]],2)}),[],!1,null,"7253a6fc",null);e.default=component.exports;installComponents(component,{SvgIcon:n(60).default})},1125:function(t,e,n){"use strict";n.r(e);n(11);var r=n(742),o=n(732),l={name:"FreezeAmount",mixins:[n.n(o).a],data:function(){return{loading:!1,hasMore:!1,value:"",pageSize3:10,pageNum3:1,filterSelected3:"",freezelist:[],total3:0,userId:this.$store.getters["session/get"]("userId"),userInfo:"",walletFreeze:0}},mounted:function(){this.getUserInfo(),this.getFreezelist()},methods:{getUserInfo:function(){this.userInfo=this.$store.state.user.info.attributes,this.walletFreeze=this.userInfo?this.userInfo.walletFreeze:0},confirm3:function(t){this.filterSelected3=t,this.getFreezelist("filter")},amountFormat:function(t){return t.amount>0?'<font color="09BB07">-￥'.concat(t.amount,"</font>"):t>0?'<font color="09BB07">+￥'.concat(t,"</font>"):'<font style="color:#FA5151">-￥'.concat(t.substr(1),"</font>")},getFreezelist:function(){var t=this;this.loading=!0;var e={"filter[user]":this.userId,"filter[change_type]":"10,11,12,81,9,8","page[number]":this.pageNum3,"page[limit]":this.pageSize3};this.$store.dispatch("jv/get",["wallet/log",{params:e}]).then((function(e){t.total3=e._jv.json.meta.total,t.freezelist=e}),(function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},sortAmount:function(t,e){return 1*t.change_available_amount-1*e.change_available_amount},dateFormat:function(t){return this.timeHandle(t.created_at)},timeHandle:function(time){return Object(r.b)(time)},handleSizeChange3:function(t){this.pageNum3=1,this.pageSize3=t,this.getFreezelist()},handleCurrentChange3:function(t){this.pageNum3=t,this.getFreezelist()}}},c=(n(1062),n(12)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"freezeAmount"},[t.total3>0?n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.freezelist}},[n("el-table-column",{attrs:{type:"selection",width:"40"}}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"change_desc",label:t.$t("profile.desc")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"desc"},[t._v(t._s(e.row.change_desc))])]}}],null,!1,2123072729)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("profile.time"),width:"140",prop:"created_at",formatter:t.dateFormat}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("pay.sumOfMoney"),width:"113",sortable:"","sort-method":t.sortAmount},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"font-size":"16px"},domProps:{innerHTML:t._s(t.$xss(t.amountFormat(e.row.change_freeze_amount)))}})]}}],null,!1,646571392)})],1),t._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{background:"","pager-count":5,"current-page":t.pageNum3,"page-sizes":[10,20,30,40],"page-size":t.pageSize3,layout:"total, sizes, prev, pager, next, jumper",total:t.total3},on:{"size-change":t.handleSizeChange3,"current-change":t.handleCurrentChange3}})],1):[t.hasMore?n("div",{staticClass:"load-more",on:{click:t.loadMore}},[t._v(t._s(t.$t("topic.showMore")))]):n("div",{staticClass:"no-more"},[0===t.freezelist.length?n("svg-icon",{staticClass:"empty-icon",attrs:{type:"empty"}}):t._e(),t._v(t._s(t.freezelist.length>0?t.$t("discuzq.list.noMoreData"):t.$t("discuzq.list.noData"))+"\n    ")],1)]],2)}),[],!1,null,"c0793524",null);e.default=component.exports;installComponents(component,{SvgIcon:n(60).default})},1126:function(t,e,n){"use strict";n.r(e);n(51),n(11),n(61);var r=n(5),o=n(742),l=n(732),c=n.n(l),d=n(900),f=n.n(d),h={name:"WalletDetail",mixins:[c.a,f.a],data:function(){return{loading:!1,hasMore:!1,value:"",pageSize2:10,pageNum2:1,date:"",filterSelected2:"",dataList2:[],total2:0,sumMoney2:0,userId:this.$store.getters["session/get"]("userId"),options2:[{value:"",label:this.$t("profile.all")+this.$t("profile.type")},{value:"10",label:this.$t("profile.withdrawalfreeze")},{value:"11",label:this.$t("profile.withdrawalsucceed")},{value:"12",label:this.$t("profile.withdrawalunfreeze")},{value:"30",label:this.$t("profile.registeredincome")},{value:"31",label:this.$t("profile.rewardincome")},{value:"32",label:this.$t("profile.laborincome")},{value:"50",label:this.$t("profile.laborexpenditure")},{value:"60,62,63",label:this.$t("profile.payincome")},{value:"35,36",label:this.$t("profile.answerincome")},{value:"81,82",label:this.$t("profile.answerpay")}]}},mounted:function(){this.setCurrentTime(),this.getList2()},methods:{toTopic:function(t){t.row.order&&t.row.order.thread&&this.$router.push("/topic/index?id=".concat(t.row.order.thread._jv.id))},sortAmount:function(t,e){return 1*t.change_available_amount-1*e.change_available_amount},timeHandle:function(time){return Object(o.b)(time)},statusFormat2:function(t){switch(t.change_type){case 10:return this.$t("profile.withdrawalfreeze");case 11:return this.$t("profile.withdrawalsucceed");case 12:return this.$t("profile.withdrawalunfreeze");case 30:return this.$t("profile.registeredincome");case 31:return this.$t("profile.rewardincome");case 32:return this.$t("profile.laborincome");case 50:return this.$t("profile.laborexpenditure");case 41:return this.$t("profile.givearewardforthetheme");case 60:return this.$t("profile.threadpayincome");case 61:return this.$t("profile.threadpay");case 81:return this.$t("profile.threadanswerpay");case 8:return this.$t("profile.answerfreeze");case 52:return this.$t("profile.filepay");case 35:return this.$t("profile.answersincome");case 36:return this.$t("profile.answersaroundincome");case 82:return this.$t("profile.answersaroundpay");default:return"未知状态"}},amountFormat:function(t){return t.amount>0?'<font color="09BB07">-￥'.concat(t.amount,"</font>"):t>0?'<font color="#FA5151">+￥'.concat(t,"</font>"):'<font style="color:#09BB07">-￥'.concat(t.substr(1),"</font>")},dateFormat:function(t){return this.timeHandle(t.created_at)},bindDateChange2:function(t){this.date=t,null!==this.date&&this.getList2("filter")},confirm2:function(t){this.filterSelected2=t,this.getList2("filter")},getList2:function(t){var e=this;this.loading=!0;var n=this.date.split("-"),o=new Date(n[0],n[1],0).getDate(),l={include:"user,order.user,order.thread,order.thread.firstPost","filter[user]":this.userId,"page[number]":this.pageNum2,"page[limit]":this.pageSize2,"filter[change_type_exclude]":"11,81","filter[start_time]":"".concat(this.date,"-01-00-00-00"),"filter[end_time]":"".concat(this.date,"-").concat(o,"-23-59-59")};t&&"filter"===t&&(l.pageNum2=1,this.dataList2=[]),this.filterSelected2&&(l["filter[change_type]"]=this.filterSelected2),r.status.run((function(){return e.$store.dispatch("jv/get",["wallet/log",{params:l}])})).then((function(t){var n=e.handleHandle(t);e.sumMoney2=e.handlemoney2(n),e.dataList2=n,e.total2=t._jv.json.meta.total}),(function(t){e.handleError(t)})).finally((function(){e.loading=!1}))},handlemoney2:function(t){var e=JSON.parse(JSON.stringify(t)),n=0;return e.forEach((function(t,r){e[r]=parseFloat(t.change_available_amount.replace(/\+|\-|\*|\?/g,"")),n+=e[r]})),n.toFixed(2)},handleHandle:function(t){var e=this,n=JSON.parse(JSON.stringify(t));return n.forEach((function(t,r){var desc=e.handleTitle(t);desc.length>42&&(desc="".concat(desc.substr(0,42),"...")),n[r].change_desc=desc})),n},handleTitle:function(t){switch(t.change_type){case 31:var e=t.order.user?t.order.user.username:this.$t("profile.theuserwasdeleted"),n=t.order.thread?t.order.thread.firstPost.summary.replace(/(<([^>]+)>)/gi,""):this.$t("profile.thethemewasdeleted");return"".concat(e," ").concat(this.$t("profile.givearewardforyourtheme")," ").concat(n);case 41:var r=t.order.thread?t.order.thread.firstPost.summary.replace(/(<([^>]+)>)/gi,""):this.$t("profile.thethemewasdeleted");return"".concat(this.$t("profile.givearewardforthetheme")," ").concat(r);case 60:var o=t.order.user?t.order.user.username:this.$t("profile.theuserwasdeleted"),l=t.order.thread?t.order.thread.firstPost.summary.replace(/(<([^>]+)>)/gi,""):this.$t("profile.givearewardforthetheme");return"".concat(o," ").concat(this.$t("profile.paidtoseeyourtheme")," ").concat(l);case 61:var c=t.order.thread?t.order.thread.firstPost.summary.replace(/(<([^>]+)>)/gi,""):this.$t("profile.thethemewasdeleted");return"".concat(this.$t("profile.paidtoview")," ").concat(c);default:return t.change_desc}},handleSizeChange2:function(t){this.pageNum2=1,this.pageSize2=t,this.getList2()},handleCurrentChange2:function(t){this.pageNum2=t,this.getList2()}}},m=(n(1063),n(12)),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"walletDetail"},[n("div",{staticClass:"selector"},[n("el-date-picker",{attrs:{type:"month",placeholder:"选择月","suffix-icon":"el-icon-arrow",format:"yyyy 年 MM 月 ","value-format":"yyyy-MM"},on:{change:t.bindDateChange2},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),n("el-select",{attrs:{placeholder:t.$t("profile.pleaseselect")},on:{change:t.confirm2},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options2,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),n("span",{staticClass:"margleft"},[t._v("\n      "+t._s(t.$t("profile.total"))+t._s(t.total2)+t._s(t.$t("profile.records"))+"\n      ")])],1),t._v(" "),t.total2>0?n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.dataList2}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"change_desc",label:t.$t("profile.desc")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"desc",on:{click:function(n){return t.toTopic(e)}}},[t._v(t._s(e.row.change_desc))])]}}],null,!1,2455081578)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("profile.time"),width:"140",prop:"created_at",formatter:t.dateFormat}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("profile.status"),width:"105",formatter:t.statusFormat2}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("pay.sumOfMoney"),width:"113",sortable:"","sort-method":t.sortAmount},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"font-size":"16px"},domProps:{innerHTML:t._s(t.$xss(t.amountFormat(e.row.change_available_amount)))}})]}}],null,!1,94768466)})],1),t._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{background:"","pager-count":5,"current-page":t.pageNum2,"page-sizes":[10,20,30,40],"page-size":t.pageSize2,layout:"total, sizes, prev, pager, next, jumper",total:t.total2},on:{"size-change":t.handleSizeChange2,"current-change":t.handleCurrentChange2}})],1):[t.hasMore?n("div",{staticClass:"load-more",on:{click:t.loadMore}},[t._v(t._s(t.$t("topic.showMore")))]):n("div",{staticClass:"no-more"},[0===t.dataList2.length?n("svg-icon",{staticClass:"empty-icon",attrs:{type:"empty"}}):t._e(),t._v(t._s(t.dataList2.length>0?t.$t("discuzq.list.noMoreData"):t.$t("discuzq.list.noData"))+"\n    ")],1)]],2)}),[],!1,null,"25038fb8",null);e.default=component.exports;installComponents(component,{SvgIcon:n(60).default})},1127:function(t,e,n){"use strict";n.r(e);n(51),n(11),n(61);var r=n(5),o=n(742),l=n(732),c=n.n(l),d=n(900),f=n.n(d),h={name:"OrderDetail",mixins:[c.a,f.a],data:function(){return{loading:!1,hasMore:!1,value:"",pageSize4:10,pageNum4:1,date:"",filterSelected4:"",dataList4:[],total4:0,sumMoney4:0,userId:this.$store.getters["session/get"]("userId"),options4:[{value:"",label:this.$t("profile.all")+this.$t("profile.type")},{value:"0",label:this.$t("profile.tobepaid")},{value:"1",label:this.$t("profile.paid")},{value:"2",label:this.$t("profile.cancelorder")},{value:"3",label:this.$t("profile.payfail")},{value:"4",label:this.$t("profile.orderexpired")}]}},mounted:function(){this.setCurrentTime(),this.getList4()},methods:{toTopic:function(t){t.row.thread&&this.$router.push("/topic/index?id=".concat(t.row.thread._jv.id))},sortAmount:function(t,e){return 1*t.amount-1*e.amount},timeHandle:function(time){return Object(o.b)(time)},statusFormat4:function(t){switch(t.status){case 0:return this.$t("profile.tobepaid");case 1:return this.$t("profile.paid");case 2:return this.$t("profile.cancelorder");case 3:return this.$t("profile.payfail");case 4:return this.$t("profile.orderexpired");default:return"未知状态"}},dateFormat:function(t){return this.timeHandle(t.created_at)},amountFormat:function(t){return t.amount>0?'<font color="09BB07">-￥'.concat(t.amount,"</font>"):t>0?'<font color="09BB07">+￥'.concat(t,"</font>"):'<font style="color:#FA5151">-￥'.concat(t.substr(1),"</font>")},bindDateChange4:function(t){this.date=t,null!==this.date&&this.getList4("filter")},confirm4:function(t){this.filterSelected4=t,this.getList4("filter")},getList4:function(t){var e=this;this.loading=!0;var n=this.date.split("-"),o=new Date(n[0],n[1],0).getDate(),l={include:"user,thread,thread.firstPost","filter[user]":this.userId,"page[number]":this.pageNum4,"page[limit]":this.pageSize4,"filter[start_time]":"".concat(this.date,"-01-00-00-00"),"filter[end_time]":"".concat(this.date,"-").concat(o,"-23-59-59")};t&&"filter"===t&&(l.pageNum4=1,this.dataList4=[]),(this.filterSelected4||0===this.filterSelected4)&&(l["filter[status]"]=this.filterSelected4),r.status.run((function(){return e.$store.dispatch("jv/get",["orders",{params:l}])})).then((function(t){var n=e.handleHandle4(t);e.sumMoney4=e.handlemoney4(n),e.dataList4=n,e.total4=t._jv.json.meta.total}),(function(t){e.handleError(t)})).finally((function(){e.loading=!1}))},handlemoney4:function(t){var e=JSON.parse(JSON.stringify(t)),n=0;return e.forEach((function(t,r){e[r]=parseFloat(t.amount.replace(/\+|\-|\*|\?/g,"")),n+=e[r]})),n.toFixed(2)},handleHandle4:function(t){var e=this,n=JSON.parse(JSON.stringify(t));return n.forEach((function(t,r){var desc=e.handleTitle4(t);desc.length>42&&(desc="".concat(desc.substr(0,42),"...")),n[r].titleType=desc})),n},handleTitle4:function(t){switch(t.type){case 1:return this.$t("profile.register");case 2:var e=t.thread?t.thread.firstPost.summary.replace(/(<([^>]+)>)/gi,""):this.$t("profile.thethemewasdeleted");return"".concat(this.$t("profile.givearewardforthetheme")," ").concat(e);case 3:var n=t.thread?t.thread.firstPost.summary.replace(/(<([^>]+)>)/gi,""):this.$t("profile.thethemewasdeleted");return"".concat(this.$t("profile.paidtoview")," ").concat(n);case 4:return this.$t("profile.paygroup");case 7:var r=t.thread?t.thread.title:this.$t("profile.thethemewasdeleted");return"付费查看了主题的附件 ".concat(r);case 5:var o=t.thread?t.thread.title:this.$t("profile.thethemewasdeleted");return"付费查看了问答 ".concat(o);case 6:var l=t.thread?t.thread.title:this.$t("profile.thethemewasdeleted");return"付费围观了问答 ".concat(l);default:return t.type}},handleSizeChange4:function(t){this.pageNum4=1,this.pageSize4=t,this.getList4()},handleCurrentChange4:function(t){this.pageNum4=t,this.getList4()}}},m=(n(1064),n(12)),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"orderDetail"},[n("div",{staticClass:"selector"},[n("el-date-picker",{attrs:{type:"month",placeholder:"选择月","suffix-icon":"el-icon-arrow",format:"yyyy 年 MM 月 ","value-format":"yyyy-MM"},on:{change:t.bindDateChange4},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),n("el-select",{attrs:{placeholder:t.$t("profile.pleaseselect")},on:{change:t.confirm4},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options4,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),n("span",{staticClass:"margleft"},[t._v("\n      "+t._s(t.$t("profile.total"))+t._s(t.total4)+t._s(t.$t("profile.records"))+"\n      ")])],1),t._v(" "),t.total4>0?n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.dataList4}},[n("el-table-column",{attrs:{prop:"_jv.id",label:"ID",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"titleType",label:t.$t("profile.desc")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"desc",on:{click:function(n){return t.toTopic(e)}}},[t._v(t._s(e.row.titleType))])]}}],null,!1,4276666330)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("profile.time"),width:"140",prop:"created_at",formatter:t.dateFormat}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("profile.status"),width:"97",formatter:t.statusFormat4}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("pay.sumOfMoney"),width:"113",sortable:"","sort-method":t.sortAmount},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"font-size":"16px"},domProps:{innerHTML:t._s(t.$xss(t.amountFormat(e.row)))}})]}}],null,!1,1723755631)})],1),t._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{background:"","pager-count":5,"current-page":t.pageNum4,"page-sizes":[10,20,30,40],"page-size":t.pageSize4,layout:"total, sizes, prev, pager, next, jumper",total:t.total4},on:{"size-change":t.handleSizeChange4,"current-change":t.handleCurrentChange4}})],1):[t.hasMore?n("div",{staticClass:"load-more",on:{click:t.loadMore}},[t._v(t._s(t.$t("topic.showMore")))]):n("div",{staticClass:"no-more"},[0===t.dataList4.length?n("svg-icon",{staticClass:"empty-icon",attrs:{type:"empty"}}):t._e(),t._v(t._s(t.dataList4.length>0?t.$t("discuzq.list.noMoreData"):t.$t("discuzq.list.noData"))+"\n    ")],1)]],2)}),[],!1,null,"415d0f9a",null);e.default=component.exports;installComponents(component,{SvgIcon:n(60).default})},1128:function(t,e,n){"use strict";n.r(e);n(51),n(27),n(267);var r=n(5),o=n(732),l=n.n(o),c=n(845),d=n.n(c),f=n(797),h={name:"Withdrawal",mixins:[l.a,f,d.a],props:{price:{type:[Number,String],default:""},error:{type:Boolean,default:!1}},data:function(){return{userId:this.$store.getters["session/get"]("userId"),userInfo:"",name:"",balance:"",userphon:"",usertestphon:"",canAmount:"",canClick:!0,disabtype:!1,verifycode:"",content:this.$t("modify.sendVerifyCode"),percentage:0,contint:"",procedures:0,cost:0,interval:"",captcha:null,ticket:"",randstr:"",captchaResult:{},withdrawlNumber:"",cashtype:0}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},watch:{forums:{handler:function(t){t.paycenter&&t.paycenter.wxpay_mchpay_close?this.cashtype=1:this.cashtype=0},deep:!0,immediate:!0}},mounted:function(){this.userinfo(),this.forumsdata()},methods:{userinfo:function(){var t=this;this.$store.dispatch("jv/get",["users/".concat(this.userId),{params:{include:"groups,wechat"}}]).then((function(e){t.userInfo=e,t.setmydata(),t.userInfo.groupsName=t.userInfo.groups?t.userInfo.groups[0].name:""}),(function(e){var n=e.response.data.errors;if(n&&Array.isArray(n)&&n.length>0&&n[0]){var r=n[0].detail&&n[0].detail.length>0?n[0].detail[0]:n[0].code;if("Invalid includes [wechat]"===r)t.$message.error(r),localStorage.removeItem("access_token"),localStorage.removeItem("user_id"),window.location.replace("/");else{var o=n[0].detail&&n[0].detail.length>0?n[0].detail[0]:t.$t("core.".concat(r));t.$message.error(o)}}}))},setmydata:function(){this.name=this.userInfo.username,this.balance=this.userInfo.walletBalance,this.usertestphon=this.userInfo.mobile,this.userphon=this.userInfo.originalMobile,this.withdrawlNumber=this.userphon,this.usertestphon||(this.disabtype=!0)},forumsdata:function(){this.cost=this.forums.set_cash.cash_rate,this.percentage=100*this.forums.set_cash.cash_rate,this.cashtype=this.forums.paycenter&&this.forums.paycenter.wxpay_mchpay_close?1:0},settlement:function(){var t=this;setTimeout((function(){if("."===t.canAmount[0]){t.canAmount="0."}if(t.canAmount=t.canAmount.replace(/[^\d.]/g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(-)*(\d+)\.(\d\d).*$/,"$1$2.$3").replace(/^\./g,""),Number(t.canAmount)>Number(t.balance)&&(t.canAmount=t.canAmount.slice(0,t.canAmount.length-1),t.$message.warning(t.$t("modify.greaterthan"))),t.canAmount.length>0){t.length=!0;var e=t.canAmount-t.canAmount*t.cost;if(e){t.contint="".concat(e.toFixed(2));var n=t.canAmount*t.cost;t.procedures=n.toFixed(2)}else t.contint="",t.procedures=""}else if(t.canAmount.length<=0){t.contint="";var r=t.canAmount*t.cost;t.procedures=r.toFixed(2)}}),5)},sendsms:function(){this.forums.qcloud.qcloud_captcha?this.tcaptcha():(this.second=60,this.sendVerifyCode())},tcaptcha:function(){var t=this;this.captcha=new TencentCaptcha(this.forums.qcloud.qcloud_captcha_app_id,(function(e){0===e.ret&&(t.ticket=e.ticket,t.randstr=e.randstr,t.sendVerifyCode())})),this.captcha.show()},sendVerifyCode:function(){var t=this,e={_jv:{type:"sms/send"},mobile:this.userphon,type:"verify",captcha_ticket:this.ticket,captcha_rand_str:this.randstr};r.status.run((function(){return t.$store.dispatch("jv/post",e)})).then((function(e){e.interval&&t.countDown(e.interval),t.ticket="",t.randstr=""}),(function(e){return t.handleError(e)}))},btncash:function(){this.verifytitle()},verifytitle:function(){var t=this,e={_jv:{type:"sms/verify"},code:this.verifycode,type:"verify"};this.$store.dispatch("jv/post",e).then((function(e){e&&t.cashwithdrawal()}),(function(e){var n=e.response.data.errors;n[0]&&("422"===n[0].status?t.$message.error(n[0].detail[0]):500===n[0].status&&t.$message.error(t.$t("core.".concat(n[0].code))))}))},cashwithdrawal:function(){var t=this,e={_jv:{type:"wallet/cash",include:["user","userWallet"]},cash_apply_amount:this.canAmount,cash_mobile:this.withdrawlNumber,cash_type:this.cashtype};r.status.run((function(){return t.$store.dispatch("jv/post",e)})).then((function(e){e&&(t.canAmount="",t.contint="",t.procedures=0,t.$message.success(t.$t("modify.withdrawal")),t.$emit("close"))}),(function(e){var n=e.response.data.errors;n[0]&&("422"===n[0].status?(t.$message.error(n[0].detail[0]),t.canAmount="",t.contint="",t.procedures=0):500===n[0].status&&("unbind_wechat"===n[0].code||"cash_mch_invalid"===n[0].code?t.$message.error(n[0].detail):(t.$message.error(t.$t("core.".concat(n[0].code))),t.canAmount="",t.contint="",t.procedures=0)))}))},tomy:function(){this.$router.push("/my/profile")}}},m=(n(1065),n(12)),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.userInfo?n("message",{attrs:{title:t.$t("profile.towithdrawal")},on:{close:function(e){return t.$emit("close")}}},[n("div",{staticClass:"top"},[n("div",{staticClass:"row"},[t.cashtype?n("div",{staticClass:"head"},[t._v("微信号")]):n("div",{staticClass:"head"},[t._v(t._s(t.$t("modify.wechatpayee")))]),t._v(" "),t.cashtype?n("div",{staticClass:"body reward"},[t.userInfo.wechat&&t.userInfo.wechat.nickname?n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.wechat.nickname,expression:"userInfo.wechat.nickname"}],staticClass:"rinput ript",attrs:{placeholder:"微信号",type:"text"},domProps:{value:t.userInfo.wechat.nickname},on:{input:function(e){e.target.composing||t.$set(t.userInfo.wechat,"nickname",e.target.value)}}})]):n("span",{staticStyle:{"font-size":"12px"}},[t._v("\n          您的用户账号未绑定微信号,请绑定微信号后再进行提现\n        ")])]):n("div",{staticClass:"body reward"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.withdrawlNumber,expression:"withdrawlNumber"}],staticClass:"rinput ript",attrs:{placeholder:t.$t("modify.enterwechat"),type:"text"},domProps:{value:t.withdrawlNumber},on:{input:function(e){e.target.composing||(t.withdrawlNumber=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"cashtext"},[t._v(t._s(t.$t("pay.cashtext")))])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"head"},[t._v(t._s(t.$t("modify.withdrawable")))]),t._v(" "),n("div",{staticClass:"body product-information"},[n("span",{staticClass:"title2"},[t._v(" ￥ "+t._s(t.balance))])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"head reward"},[t._v("\n        "+t._s(t.$t("modify.withdratitle")+t.$t("pay.sumOfMoney"))+"\n      ")]),t._v(" "),n("div",{staticClass:"body reward"},[n("label",[n("span",[t._v("￥")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.canAmount,expression:"canAmount"}],staticClass:"rinput",attrs:{placeholder:t.$t("modify.enteramount"),type:"text"},domProps:{value:t.canAmount},on:{input:[function(e){e.target.composing||(t.canAmount=e.target.value)},t.settlement]}})])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"head"},[t._v(t._s(t.$t("modify.actualamout")))]),t._v(" "),n("div",{staticClass:"body product-information"},[n("span",{staticClass:"title3"},[t._v(" ￥ "+t._s(t.contint||0))]),t._v(" "),n("span",{staticClass:"title4"},[t._v("\n          "+t._s(t.$t("modify.servicechaege"))+t._s(t.procedures)+t._s(t.$t("modify.percentage"))+" "+t._s(t.percentage)+"%)")])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"head reward"},[t._v(t._s(t.$t("user.verificationCode2")))]),t._v(" "),n("div",{staticClass:"body reward"},[n("label",[n("span"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.verifycode,expression:"verifycode"}],attrs:{placeholder:t.$t("modify.placeEnterCode"),type:"text"},domProps:{value:t.verifycode},on:{input:function(e){e.target.composing||(t.verifycode=e.target.value)}}}),t._v(" "),n("el-button",{attrs:{size:"medium",disabled:!t.canClick||!t.usertestphon},on:{click:t.sendsms}},[t._v(t._s(t.content))])],1),t._v(" "),t.usertestphon?n("span",{staticClass:"phone"},[t._v("\n          "+t._s(t.$t("profile.codesend"))+"\n          "),n("span",{staticStyle:{"font-weight":"bold",color:"#000000"}},[t._v(t._s(t.usertestphon))]),t._v("\n          "+t._s(t.$t("profile.phonesms"))+"\n        ")]):n("span",{staticClass:"phone"},[t._v("\n          "+t._s(t.$t("profile.withoutbind"))+"\n          "),n("span",{staticClass:"phonei",on:{click:t.tomy}},[t._v("\n            "+t._s(t.$t("profile.personalhomepage"))+"\n          ")]),t._v("\n          "+t._s(t.$t("profile.tobindphone"))+"\n        ")])])])]),t._v(" "),n("div",{staticClass:"bottom"},[t.cashtype?n("span",{staticStyle:{"font-size":"14px"}},[t._v("\n      ￥"+t._s(t.contint||0)+t._s(t.$t("pay.rmb")+t.$t("profile.withdrawalto")+(t.userInfo&&t.userInfo.wechat&&t.userInfo.wechat.nickname?t.userInfo.wechat.nickname:""))+t._s(t.$t("pay.ofAccount"))+"\n    ")]):n("span",{staticStyle:{"font-size":"14px"}},[t._v("\n      ￥"+t._s(t.contint||0)+t._s(t.$t("pay.rmb")+t.$t("profile.withdrawalto")+t.withdrawlNumber||"")+t._s(t.$t("pay.ofAccount"))+"\n    ")]),t._v(" "),n("el-button",{staticClass:"border",attrs:{size:"medium",type:"primary"},on:{click:t.btncash}},[t._v(t._s(t.$t("profile.comfirmwithdrawal")))])],1)]):t._e()}),[],!1,null,"e087e960",null);e.default=component.exports;installComponents(component,{Message:n(787).default})},1151:function(t,e,n){"use strict";n.r(e);var r=n(5),head=n(733),o=n.n(head),l=n(732),c=n.n(l),d={name:"Wallet",layout:"center_layout",mixins:[o.a,c.a],data:function(){return{title:this.$t("profile.mywallet"),isWithdraw:!1,inputpas:"",usertokenid:"",showNewverify:!1,showNewverify2:!1,setPasswordInput:!1,repPasswordInput:!1,showPasswordInput:!1,passError:!1,codeError:!1,loadingType:"",dataInfo:"",hasPassword:!1,issendcode:!1,isfindpwd:!1,isWithoutphone:!1,passwordErrorTip:""}},computed:{forums:function(){return this.$store.state.site.info.attributes||{}},userId:function(){return this.$store.getters["session/get"]("userId")}},watch:{userId:function(t){t&&this.getInfo()}},mounted:function(){this.userId&&this.getInfo()},methods:{updateWithdraw:function(){this.isWithdraw=!1,this.$refs.cash.getList()},showWithdraw:function(){this.isWithdraw=!0},setPassword:function(){this.setPasswordInput=!0},changePassword:function(){this.showPasswordInput=!0},repeatclose:function(){this.showNewverify2=!1,this.codeError=!1},validatePass:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={_jv:{type:"users/pay-password/reset"},pay_password:e},o=r.status.run((function(){return t.$store.dispatch("jv/post",n)}));o.then((function(e){e._jv.json.data.id&&(t.passError=!1,t.showPasswordInput=!1,t.$message.success(t.$t("modify.authensucceeded")),t.showNewverify=!0,t.usertokenid=e._jv.json.data.id)})).catch((function(e){t.$refs.walletpass.empty();var n=e.response.data.errors;if("validation_error"===n[0].code)return t.passError=!0,void(t.passwordErrorTip=n[0].detail[0]);t.handleError(e)}))},checkpass:function(t){t.length>=6&&(this.inputpas=t,this.showNewverify=!1,this.showNewverify2=!0)},checkpass2:function(t){t.length>=6&&this.validateVerify(t)},setPass:function(t){t.length>=6&&(this.inputpas=t,this.setPasswordInput=!1,this.repPasswordInput=!0)},setPass2:function(t){t.length>=6&&this.validateVerify(t)},validateVerify:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={_jv:{type:"users",id:this.userId},pay_password_token:this.usertokenid,payPassword:this.inputpas,pay_password_confirmation:e},o=r.status.run((function(){return t.$store.dispatch("jv/patch",n)}));o.then((function(e){t.inputpas="",e&&(t.repPasswordInput=!1,t.showNewverify2=!1,t.$message.success(t.$t("modify.paymentsucceed")),t.getInfo())})).catch((function(e){t.$refs.repeatnewpass&&t.$refs.repeatnewpass.empty(),t.$refs.repeatpass&&t.$refs.repeatpass.empty(),t.codeError=!0,t.handleError(e)}))},getInfo:function(){var t=this;r.status.run((function(){return t.$store.dispatch("jv/get","wallet/user/".concat(t.userId))})).then((function(e){t.dataInfo=e,t.hasPassword=e.user.canWalletPay}),(function(e){return t.handleError(e)}))},findPaypwd:function(){this.dataInfo.user.mobile?this.isfindpwd=!0:this.isWithoutphone=!0}}},f=(n(1055),n(12)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.dataInfo?n("div",{staticClass:"mywallet"},[n("div",{staticClass:"mywallet-top"},[n("div",{staticClass:"mywallet-topitem"},[n("div",{staticClass:"margbtm"},[t._v(t._s(t.$t("profile.availableamount")))]),t._v(" "),t.dataInfo.available_amount>0?n("div",{staticClass:"amount",staticStyle:{color:"#1878F3"}},[t._v(t._s("¥ "+(t.dataInfo&&t.dataInfo.available_amount||0))+"\n        "),n("span",{staticClass:"availmount",on:{click:t.showWithdraw}},[t._v(t._s(t.$t("modify.withdratitle")))])]):n("div",{staticClass:"amount"},[t._v(t._s("¥ "+(t.dataInfo&&t.dataInfo.available_amount||0))+"\n        "),n("span",{staticClass:"availmount",on:{click:t.showWithdraw}},[t._v(t._s(t.$t("modify.withdratitle")))])])]),t._v(" "),n("div",{staticClass:"mywallet-topitem mymarg"},[n("div",{staticClass:"margbtm"},[t._v(t._s(t.$t("profile.freezeamount")))]),t._v(" "),t.dataInfo.freeze_amount>0?n("div",{staticClass:"amount",staticStyle:{color:"#FA5151"}},[t._v(t._s("¥ "+(t.dataInfo&&t.dataInfo.freeze_amount||0)))]):n("div",{staticClass:"amount"},[t._v(t._s("¥ "+(t.dataInfo&&t.dataInfo.freeze_amount||0)))])]),t._v(" "),n("div",{staticClass:"mywallet-topitem mywallet-r"},[n("div",{staticClass:"margbtm"},[t._v(t._s(t.$t("pay.payPassword")))]),t._v(" "),t.hasPassword?n("div",[n("span",{staticClass:"changepas",on:{click:t.changePassword}},[n("svg-icon",{staticClass:"shield-icon",attrs:{type:"shield"}}),t._v(t._s(t.$t("profile.walletpasset"))+"\n        ")],1)]):n("div",{staticStyle:{cursor:"pointer"},on:{click:t.setPassword}},[n("svg-icon",{staticClass:"shield-icon",attrs:{type:"warning"}}),t._v(t._s(t.$t("profile.setpaypassword"))+"\n      ")],1)]),t._v(" "),t.hasPassword?n("div",[t.showPasswordInput?n("wallet-password",{ref:"walletpass",attrs:{error:t.passError,"password-error-tip":t.passwordErrorTip},on:{close:function(e){t.showPasswordInput=!1},password:t.validatePass,findpaypwd:t.findPaypwd}}):t._e(),t._v(" "),t.showNewverify?n("set-newpassword",{on:{close:function(e){t.showNewverify=!1},password:t.checkpass}}):t._e(),t._v(" "),t.showNewverify2?n("repeat-newpassword",{ref:"repeatnewpass",attrs:{error:t.codeError},on:{close:t.repeatclose,password:t.checkpass2}}):t._e()],1):n("div",[t.setPasswordInput?n("set-password",{on:{close:function(e){t.setPasswordInput=!1},password:t.setPass}}):t._e(),t._v(" "),t.repPasswordInput?n("repeat-password",{ref:"repeatpass",attrs:{error:t.codeError},on:{close:function(e){t.repPasswordInput=!1},password:t.setPass2}}):t._e()],1),t._v(" "),t.isfindpwd?n("find-paypwd",{attrs:{mobile:t.dataInfo.user.mobile,phonenum:t.dataInfo.user.originalMobile},on:{close:function(e){t.isfindpwd=!1}}}):t._e(),t._v(" "),t.isWithoutphone?n("without-phone",{on:{close:function(e){t.isWithoutphone=!1}}}):t._e()],1),t._v(" "),n("el-tabs",{staticClass:"register-select",attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:t.$t("profile.withdrawalslist")}},[n("cash-dialog",{ref:"cash"})],1),t._v(" "),n("el-tab-pane",{attrs:{label:t.$t("profile.freezeamount")}},[n("freeze-amount")],1),t._v(" "),n("el-tab-pane",{attrs:{label:t.$t("profile.walletlist")}},[n("wallet-detail")],1),t._v(" "),n("el-tab-pane",{attrs:{label:t.$t("profile.orderlist")}},[n("order-detail")],1)],1),t._v(" "),t.isWithdraw?n("withdrawal",{on:{close:t.updateWithdraw}}):t._e()],1):t._e()}),[],!1,null,"2792c37a",null);e.default=component.exports;installComponents(component,{SvgIcon:n(60).default,WalletPassword:n(1119).default,SetNewpassword:n(1120).default,RepeatNewpassword:n(1121).default,SetPassword:n(1122).default,RepeatPassword:n(1123).default,FindPaypwd:n(871).default,WithoutPhone:n(872).default,CashDialog:n(1124).default,FreezeAmount:n(1125).default,WalletDetail:n(1126).default,OrderDetail:n(1127).default,Withdrawal:n(1128).default})},742:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return l}));n(177),n(51);var r=function(time){var t=(window.currentTime||new Date)-new Date(time);return parseInt(parseInt(t/1e3,0)/60,0)<60?"".concat(Math.ceil(t/1e3/60)>0?Math.ceil(t/1e3/60):1,"分钟前"):parseInt(parseInt(parseInt(t/1e3,0)/60,0)/60,0)<16?"".concat(Math.ceil(t/1e3/60/60)>0?Math.ceil(t/1e3/60/60):1,"小时前"):time.replace(/T/," ").replace(/Z/,"").substring(0,16)},o=function(t){var e=t-Math.round(new Date/1e3);return parseInt(e/86400,0)},l=function(t){var e=Math.round(new Date(t)/1e3),n=Math.round(new Date/1e3)-e,r=parseInt(n/86400,0);if(r>365){var o=parseInt(n/86400/365,0);return"".concat(o,"年")}return"".concat(r,"天")}},793:function(t,e,n){n(11);var r=n(797);t.exports={mixins:[r],computed:{forums:function(){return this.$store.state.site.info.attributes||{}}},methods:{checkCaptcha:function(t){var e=this;return new Promise((function(n,r){if(e.forums&&e.forums.qcloud&&e.forums.qcloud.qcloud_captcha)return new TencentCaptcha(e.forums.qcloud.qcloud_captcha_app_id,(function(e){0===e.ret?(t.captcha_rand_str=e.randstr,t.captcha_ticket=e.ticket,n(t)):r(e)})).show();n(t)}))}}}},809:function(t,e,n){},810:function(t,e,n){},845:function(t,e){t.exports={methods:{countDown:function(t){var e=this;if(this.canClick){var n=t;this.canClick=!1,this.content=n+this.$t("modify.retransmission");var r=setInterval((function(){n-=1,e.content=n+e.$t("modify.retransmission"),n<0&&(clearInterval(r),e.content=e.$t("modify.sendVerifyCode"),e.canClick=!0)}),1e3)}}}}},866:function(t,e,n){"use strict";var r=n(809);n.n(r).a},867:function(t,e,n){"use strict";var r=n(810);n.n(r).a},871:function(t,e,n){"use strict";n.r(e);n(32);var r=n(8),o=(n(51),n(5)),l=n(732),c=n.n(l),d=n(793),f={name:"FindPaypwd",mixins:[n.n(d).a,c.a],props:{mobile:{type:String,default:""},phonenum:{type:String,default:""}},data:function(){return{phoneNumber:"",isVerifyDisabled:!0,canCountDown:!1,countDownSecond:60,loading:!1,verifyCode:"",newPassword:"",newPasswordRepeat:"",username:"",realphoneNumber:"",userId:this.$store.getters["session/get"]("userId")}},mounted:function(){this.phoneNumber=this.mobile,this.realphoneNumber=this.phonenum},methods:{onInput:function(t){this.phoneNumber=t.target.value.replace(/[^\d]/g,""),this.isVerifyDisabled=11!==this.phoneNumber.length},countDown:function(t){var e=this;this.canCountDown=!0,this.countDownSecond=t;var n=setInterval((function(){e.countDownSecond-=1,0===e.countDownSecond&&(e.canCountDown=!1,clearInterval(n))}),1e3)},sendVerifyCode:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={_jv:{type:"sms/send"},mobile:t.realphoneNumber,type:"reset_pay_pwd"},e.next=3,t.checkCaptcha(n);case 3:n=e.sent,o.status.run((function(){return t.$store.dispatch("jv/post",n)})).then((function(e){e.interval&&t.countDown(e.interval)}),(function(e){var n=e.response.data.errors;if(n[0])return t.$message.error(n[0].detail[0])}));case 5:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;if(""===this.verifyCode)this.$message.error("验证码不能为空");else if(""===this.newPassword)this.$message.error("新密码不能为空");else if(""===this.newPasswordRepeat)this.$message.error("重复密码不能为空");else if(this.newPassword!==this.newPasswordRepeat)this.$message.error("二次密码输入不一致");else{var e={_jv:{type:"sms/verify"},mobile:this.realphoneNumber,code:this.verifyCode,pay_password:this.newPassword,pay_password_confirmation:this.newPasswordRepeat,type:"reset_pay_pwd"};o.status.run((function(){return t.$store.dispatch("jv/post",e)})).then((function(){t.$message.success(t.$t("modify.paymentsucceed")),t.$emit("close")}),(function(e){return t.handleError(e)}))}}}},h=(n(866),n(12)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("message",{attrs:{title:t.$t("modify.forgetPassword")+"/"+t.$t("modify.retrievePassword")+" "},on:{close:function(e){return t.$emit("close")}}},[n("div",{staticClass:"container"},[n("div",{staticClass:"retrieve-inputs"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNumber,expression:"phoneNumber"}],attrs:{maxlength:"11",type:"text",placeholder:t.$t("modify.placeEnterRegisteredPhone")},domProps:{value:t.phoneNumber},on:{input:function(e){e.target.composing||(t.phoneNumber=e.target.value)}}}),t._v(" "),t.canCountDown?n("button",{class:{disabled:t.canCountDown},attrs:{disabled:t.canCountDown}},[t._v(t._s(t.countDownSecond+t.$t("modify.retransmission")))]):n("button",{staticClass:"sendbtn",on:{click:t.sendVerifyCode}},[t._v("\n          "+t._s(t.$t("modify.sendVerifyCode"))+"\n        ")])]),t._v(" "),n("el-input",{attrs:{maxlength:"6",placeholder:t.$t("modify.placeEnterCode")},model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}}),t._v(" "),n("el-input",{attrs:{placeholder:"请输入新支付密码","show-password":""},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),t._v(" "),n("el-input",{attrs:{placeholder:"请重新输入新支付密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.newPasswordRepeat,callback:function(e){t.newPasswordRepeat=e},expression:"newPasswordRepeat"}})],1),t._v(" "),n("button",{staticClass:"submit",on:{click:t.submit}},[t._v(t._s(t.$t("modify.newPayPwdTitle")))])])])}),[],!1,null,"04a56ea6",null);e.default=component.exports;installComponents(component,{Message:n(787).default})},872:function(t,e,n){"use strict";n.r(e);var r={name:"WalletPassword",data:function(){return{}},methods:{tobind:function(){this.$router.push("/my/profile?phonebind=true")}}},o=(n(867),n(12)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("message",{attrs:{title:t.$t("modify.forgetPassword")+"/"+t.$t("modify.retrievePassword")+" "},on:{close:function(e){return t.$emit("close")}}},[n("div",{staticClass:"container"},[n("div",{staticClass:"block show-amount"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("modify.nohasphon")))]),t._v(" "),n("div",{staticClass:"amount"},[n("span",[t._v(t._s(t.$t("modify.forgetPassword")+"/"+t.$t("modify.retrievePassword")+",需要您先绑定常用手机号码"))])]),t._v(" "),n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.tobind}},[t._v("前去绑定")])],1)])])}),[],!1,null,"406cf642",null);e.default=component.exports;installComponents(component,{Message:n(787).default})},894:function(t,e,n){},895:function(t,e,n){},896:function(t,e,n){},897:function(t,e,n){},898:function(t,e,n){},899:function(t,e,n){},900:function(t,e,n){t.exports={methods:{setCurrentTime:function(){var t=window.currentTime||new Date,e=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0".concat(n):n,this.date="".concat(e,"-").concat(n)}}}},901:function(t,e,n){},902:function(t,e,n){},903:function(t,e,n){},904:function(t,e,n){},905:function(t,e,n){}}]);