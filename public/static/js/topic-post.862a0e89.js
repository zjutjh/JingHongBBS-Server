(window.webpackJsonp=window.webpackJsonp||[]).push([["topic-post"],{"185d":function(t,e,i){t.exports=i.p+"static/img/auth.bac1d347.svg"},1865:function(t,e,i){"use strict";i.r(e);var o=i("8a88"),a=i("3bd0");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("a499");var s=i("f0c5"),r=Object(s.a)(a.default,o.b,o.c,!1,null,"1e704c7c",null,!1,o.a,void 0);e.default=r.exports},"245f":function(t,e,i){"use strict";(function(e){var o=i("4ea4"),a=o(i("6f74")),n=i("b95e"),s=o(i("4c82"));t.exports={mixins:[a.default,s.default],methods:{getForum:function(){var t=this;this.$store.dispatch("jv/get",["forum",{params:{include:"users"}}]).then((function(i){i&&(e.log("forum",i),t.forum=i)}))},jump2PhoneLoginPage:function(){uni.redirectTo({url:"/pages/user/phone-login"})},jump2PhoneLoginRegisterPage:function(){uni.redirectTo({url:"/pages/user/phone-login-register"})},jump2LoginPage:function(){uni.redirectTo({url:"/pages/user/login"})},jump2RegisterPage:function(){uni.redirectTo({url:"/pages/user/register"})},jump2RegisterExtendPage:function(){uni.redirectTo({url:"/pages/user/supple-mentary"})},jump2LoginBindPage:function(){uni.redirectTo({url:"/pages/user/login-bind"})},jump2RegisterBindPage:function(){uni.redirectTo({url:"/pages/user/register-bind"})},jump2LoginBindPhonePage:function(){uni.redirectTo({url:"/pages/user/login-bind-phone"})},jump2RegisterBindPhonePage:function(){uni.redirectTo({url:"/pages/user/register-bind-phone"})},jump2findpwdPage:function(){uni.navigateTo({url:"/pages/modify/findpwd?pas=reset_pwd"})},mpLoginMode:function(){this.forums&&this.forums.set_reg&&0===this.forums.set_reg.register_type&&this.jump2LoginPage(),this.forums&&this.forums.set_reg&&1===this.forums.set_reg.register_type&&this.jump2PhoneLoginRegisterPage(),this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&(uni.setStorageSync("register",1),uni.setStorageSync("isSend",!0),this.$store.getters["session/get"]("auth").open())},h5LoginMode:function(){s.default.isWeixin().isWeixin?(this.forums&&this.forums.set_reg&&0===this.forums.set_reg.register_type&&uni.navigateTo({url:"/pages/user/login"}),this.forums&&this.forums.set_reg&&1===this.forums.set_reg.register_type&&this.jump2PhoneLoginRegisterPage(),this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&(uni.setStorageSync("register",1),this.$store.dispatch("session/wxh5Login"))):(this.forums&&this.forums.set_reg&&0===this.forums.set_reg.register_type&&uni.navigateTo({url:"/pages/user/login"}),this.forums&&this.forums.set_reg&&1===this.forums.set_reg.register_type&&this.jump2PhoneLoginRegisterPage(),this.forums&&this.forums.set_reg&&2===this.forums.set_reg.register_type&&uni.navigateTo({url:"/pages/user/login"}))},refreshmpParams:function(){var t=this;uni.login({success:function(i){if("login:ok"===i.errMsg){var o=i.code;uni.getUserInfo({success:function(e){var i={data:{attributes:{js_code:o,iv:e.iv,encryptedData:e.encryptedData}}};t.$store.dispatch("session/setParams",i)},fail:function(t){e.log(t)}})}},fail:function(t){e.log(t)}})},mpLogin:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;uni.setStorageSync("register",t),uni.setStorageSync("isSend",!0),this.$store.getters["session/get"]("auth").open()},wxh5Login:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;uni.setStorageSync("register",t),uni.setStorageSync("rebind",e),uni.setStorageSync("h5_wechat_login",1),this.$store.dispatch("session/wxh5Login")},getLoginParams:function(t,e){var i=t;if(""===t.data.attributes.username)uni.showToast({icon:"none",title:this.i18n.t("user.usernameEmpty"),duration:2e3});else if(""===t.data.attributes.password)uni.showToast({icon:"none",title:this.i18n.t("user.passwordEmpty"),duration:2e3});else{var o=uni.getStorageSync("token");""!==o&&(i.data.attributes.token=o),this.login(i,e)}},getLoginBindParams:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.refreshmpParams();var o=t;if(""===t.data.attributes.username)uni.showToast({icon:"none",title:this.i18n.t("user.usernameEmpty"),duration:2e3});else if(""===t.data.attributes.password)uni.showToast({icon:"none",title:this.i18n.t("user.passwordEmpty"),duration:2e3});else{1===i&&(o.data.attributes.rebind=1);var a=uni.getStorageSync("token");""!==a&&(o.data.attributes.token=a),this.login(o,e)}},login:function(t,i){var o=this;this.$store.dispatch("session/h5Login",t).then((function(t){if(t&&t.data&&t.data.data&&t.data.data.id&&(o.logind(),o.$store.dispatch("jv/get",["forum",{params:{include:"users"}}]).then((function(t){t&&t.set_site&&t.set_site.site_mode!==n.SITE_PAY&&uni.getStorage({key:"page",success:function(t){e.log("resData",t),uni.redirectTo({url:t.data})}}),t&&t.set_site&&t.set_site.site_mode===n.SITE_PAY&&o.user&&!o.user.paid&&uni.redirectTo({url:"/pages/site/info"})})),uni.showToast({title:i,duration:2e3})),t&&t.data&&t.data.errors){if("401"===t.data.errors[0].status||"402"===t.data.errors[0].status||"500"===t.data.errors[0].status){var a=o.i18n.t("core.".concat(t.data.errors[0].code));uni.showToast({icon:"none",title:a,duration:2e3})}if("403"===t.data.errors[0].status||"422"===t.data.errors[0].status){var s=o.i18n.t(t.data.errors[0].detail[0]);uni.showToast({icon:"none",title:s,duration:2e3})}}})).catch((function(t){return e.log(t)}))}}}}).call(this,i("5a52").default)},"25d8":function(t,e,i){"use strict";var o=i("4ea4");i("99af"),i("c975"),i("ac1f"),i("1276");var a=o(i("b469"));t.exports={mixins:[a.default],methods:{getPosition:function(){var t=this.forums.lbs.qq_lbs_key;new qq.maps.Geolocation(t,"myapp").getLocation(this.showPosition,this.errorPosition,{timeout:6e3})},showPosition:function(t){var e=this.forums.lbs.qq_lbs_key,i="".concat(t.lat,",").concat(t.lng),o=window.location.href,a=o.indexOf("&name");-1!==a&&(o=o.substr(0,a));var n=encodeURIComponent(o);window.location.href="https://apis.map.qq.com/tools/locpicker?search=1&type=0&backurl=".concat(n,"&key=").concat(e,"&referer=myapp&coord=").concat(i)},errorPosition:function(){this.getPosition()},getUrl:function(){var t=/iPad|iPhone|iPod/.test(navigator.userAgent),e=window.location.href.split("#")[0];return t&&window.entryUrl&&!/wechatdevtools/.test(navigator.userAgent)&&(e=window.entryUrl),e}}}},"2ddd":function(t,e,i){"use strict";(function(t){var o;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return o}));try{o={quiPage:i("29c4").default,quiCellItem:i("e0ca").default,quiAvatar:i("da98").default,quiIcon:i("895d").default,quiEmoji:i("725e").default,uLoading:i("802a").default,quiVditor:i("1b7a").default,quiUploader:i("c012").default,quiUploadFile:i("500f").default,quiUploadVideo:i("a1e0").default,quiUploadAudio:i("0316").default,uSwitch:i("1504").default,quiButton:i("8397").default,quiPay:i("35fd").default,uniPopup:i("1c89").default,quiToast:i("2039").default,quiLoadingCover:i("605f").default}}catch(e){if(-1===e.message.indexOf("Cannot find module")||-1===e.message.indexOf(".vue"))throw e;t.error(e.message),t.error("1. 排查组件名称拼写是否正确"),t.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),t.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("qui-page",{attrs:{"data-qui-theme":t.theme}},[t.loadStatus?i("v-uni-view",{staticClass:"post-box"},[1===t.type?i("v-uni-view",{staticClass:"post-box__title"},[1===t.type?i("v-uni-input",{staticClass:"post-box__title-input",attrs:{type:"text",focus:1===t.type,placeholder:t.i18n.t("discuzq.post.pleaseEnterAPostTitle")},model:{value:t.postTitle,callback:function(e){t.postTitle=e},expression:"postTitle"}}):t._e()],1):t._e(),5===t.type?i("v-uni-view",{staticClass:"post-box__titles"},[5===t.type?i("qui-cell-item",{attrs:{title:t.i18n.t("discuzq.post.askedUsers"),"slot-right":!0,arrow:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAvatar.apply(void 0,arguments)}}},[i("qui-avatar",{staticClass:"my-profile__avatar",staticStyle:{"margin-right":"20rpx"},attrs:{user:{avatarUrl:t.userImage,username:t.beUserName}}}),i("v-uni-view",{staticClass:"username"},[t._v(t._s(t.beUserName))])],1):t._e()],1):t._e(),1!==t.type?i("v-uni-view",[i("v-uni-view",{staticClass:"post-box__hd"},[i("v-uni-view",{staticClass:"post-box__hd-l"},[i("qui-icon",{staticClass:"post-box__hd-l__icon",attrs:{name:"icon-expression",size:"40",color:t.emojiShow?"#1878F3":"#777"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.emojiclick.apply(void 0,arguments)}}}),i("qui-icon",{staticClass:"post-box__hd-l__icon",attrs:{name:"icon-call",size:"40",color:"#777"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.callClick.apply(void 0,arguments)}}}),i("qui-icon",{staticClass:"post-box__hd-l__icon",attrs:{name:"icon-wei",size:"40",color:"#777"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.topicPage.apply(void 0,arguments)}}})],1),5!==t.type?i("v-uni-text",{staticClass:"post-box__hd-r"},[t._v(t._s(t.textAreaValue.length<=t.textAreaLength?t.i18n.t("discuzq.post.note",{num:t.textAreaLength-t.textAreaValue.length}):t.i18n.t("discuzq.post.exceed",{num:t.textAreaValue.length-t.textAreaLength})))]):t._e(),5===t.type?i("v-uni-text",{staticClass:"post-box__hd-r"},[t._v(t._s(t.textAreaValue.length<=t.textAreaLength?t.i18n.t("discuzq.post.note",{num:t.textAnswerLength-t.textAreaValue.length}):t.i18n.t("discuzq.post.exceed",{num:t.textAreaValue.length-t.textAnswerLength})))]):t._e()],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.emojiShow,expression:"emojiShow"}],staticClass:"emoji-bd"},[i("qui-emoji",{attrs:{position:"absolute",top:"20rpx","border-radius":"10rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getEmojiClick.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"post-box__con"},[i("v-uni-textarea",{directives:[{name:"show",rawName:"v-show",value:t.textShow,expression:"textShow"}],ref:"textarea",staticClass:"post-box__con-text",attrs:{id:"textarea",placeholder:5!==t.type?t.i18n.t("discuzq.post.placeholder"):t.i18n.t("discuzq.post.placeholderQuestion"),"placeholder-class":"textarea-placeholder","auto-height":"true","show-confirm-bar":t.barStatus,"adjust-position":!0,"cursor-spacing":"30",cursor:"cursor",maxlength:49999,focus:1!==t.type},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.contBlur.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.focusEvent.apply(void 0,arguments)}},model:{value:t.textAreaValue,callback:function(e){t.textAreaValue=e},expression:"textAreaValue"}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.textShow,expression:"!textShow"}],staticClass:"post-box__con-text post-box__con-text--static"},[i("v-uni-text",{staticClass:"text-cover"},[t._v(t._s(t.textAreaValue))])],1),t.markdownShow?i("v-uni-view",{staticClass:"markdown-box"},[i("v-uni-view",[i("qui-icon",{staticClass:"qui-icon",attrs:{name:"icon-bold",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toolBarClick("bold")}}})],1),i("v-uni-view",[i("qui-icon",{staticClass:"qui-icon",attrs:{name:"icon-title",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toolBarClick("title")}}})],1),i("v-uni-view",[i("qui-icon",{staticClass:"qui-icon",attrs:{name:"icon-italic",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toolBarClick("italic")}}})],1),i("v-uni-view",[i("qui-icon",{staticClass:"qui-icon",attrs:{name:"icon-quote",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toolBarClick("quote")}}})],1),i("v-uni-view",[i("qui-icon",{staticClass:"qui-icon",attrs:{name:"icon-code",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toolBarClick("code")}}})],1),i("v-uni-view",[i("qui-icon",{staticClass:"qui-icon",attrs:{name:"icon-link",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toolBarClick("link")}}})],1),i("v-uni-view",[i("qui-icon",{staticClass:"qui-icon",attrs:{name:"icon-strikethrough",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toolBarClick("strikethrough")}}})],1)],1):t._e()],1)],1):i("v-uni-view",[t.vditor?t._e():i("v-uni-view",{staticStyle:{"text-align":"center"}},[i("u-loading",{attrs:{size:"40"}})],1),i("qui-vditor",{ref:"vditor"})],1),3===t.type||5===t.type?i("qui-uploader",{ref:"upload",attrs:{url:t.url+"api/attachments","form-data":t.formData,"file-preview":t.filePreview,name:"file","async-clear":!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadChange.apply(void 0,arguments)},clear:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadClear.apply(void 0,arguments)},uploadClick:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadClick.apply(void 0,arguments)}}}):t._e(),i("qui-upload-file",{directives:[{name:"show",rawName:"v-show",value:1===t.type&&5!==t.type&&t.forums.other&&t.forums.other.can_upload_attachments,expression:"type === 1 && type !== 5 && forums.other && forums.other.can_upload_attachments"}],ref:"uploadFiles",attrs:{url:t.url+"api/attachments",header:t.header,"attachment-list":t.attachmentList,"file-format":t.forums.set_attach&&t.forums.set_attach.support_file_ext,"file-size":t.forums.set_attach&&t.forums.set_attach.support_max_size},on:{deleteItem:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteFile.apply(void 0,arguments)}}}),2===t.type?i("qui-upload-video",{ref:"uploadVideo",attrs:{"type-status":t.operating,url:t.url,"video-before-list":t.videoBeforeList,controls:t.controlsStatus,"choose-type":t.chooseType},on:{videoDel:function(e){arguments[0]=e=t.$handleEvent(e),t.videoDel.apply(void 0,arguments)}}}):t._e(),4===t.type?i("v-uni-view",{staticClass:"post-box__audio"},[i("qui-upload-audio",{ref:"uploadAudio",attrs:{"audio-before-list":t.audioBeforeList},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadAudioChange.apply(void 0,arguments)},audioDel:function(e){arguments[0]=e=t.$handleEvent(e),t.audioDel.apply(void 0,arguments)}}})],1):t._e(),1===t.type&&t.forums.other&&t.forums.other.can_create_thread_paid&&t.ioshide?i("qui-cell-item",{attrs:{title:t.i18n.t("discuzq.post.lookPay"),addon:t.showPayType,arrow:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.lookPay.apply(void 0,arguments)}}}):t._e(),1===t.type?i("v-uni-view",[0!==t.type&&t.showHidden&&t.forums.paycenter&&t.forums.paycenter.wxpay_close&&0!==t.payType&&t.forums.other.can_create_thread_paid&&t.ioshide?i("qui-cell-item",{class:t.price>0?"cell-item-right-text":"",attrs:{title:t.i18n.t("discuzq.post.paymentAmount"),addon:t.showPrice,arrow:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cellClick("pay")}}}):t._e()],1):0!==t.type&&5!==t.type&&6!==t.type&&t.forums.other.can_create_thread_paid&&t.ioshide?i("v-uni-view",[0!==t.type&&t.showHidden&&t.forums.paycenter.wxpay_close&&t.forums.other.can_create_thread_paid&&t.ioshide?i("qui-cell-item",{class:t.price>0?"cell-item-right-text":"",attrs:{title:4===t.type?t.i18n.t("discuzq.post.payByListeningToAudio"):t.i18n.t("discuzq.post.paymentAmount"),addon:t.showPrice,arrow:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cellClick("pay")}}}):t._e()],1):t._e(),5===t.type?i("v-uni-view",{staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",{staticClass:"uni-list-cell-db"},[t._v(t._s(t.i18n.t("discuzq.post.anonymousQuestions")))]),i("u-switch",{attrs:{"active-color":"#1E78F3"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCheck.apply(void 0,arguments)}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1):t._e(),5===t.type&&t.forums.other&&t.forums.other.can_be_onlooker?i("v-uni-view",{staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",{staticClass:"uni-list-cell-db"},[i("v-uni-view",{},[t._v(t._s(""+t.i18n.t("discuzq.post.otherPay")+t.forums.set_site.site_onlooker_price+"元"))]),i("v-uni-view",{staticClass:"watchpay"},[t._v(t._s(t.i18n.t("discuzq.post.youHaveTo")+"\n            "+t.haveDate+t.i18n.t("discuzq.post.yuan")+",\n            "+t.i18n.t("discuzq.post.theAnswerIs")+"\n            "+t.answerIsDate+t.i18n.t("discuzq.post.yuan")+",\n            "+t.i18n.t("discuzq.post.platform")+"\n            "+t.platformDate+t.i18n.t("discuzq.post.yuan")))])],1),i("u-switch",{attrs:{"active-color":"#1E78F3"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCheck.apply(void 0,arguments)}},model:{value:t.watchChecked,callback:function(e){t.watchChecked=e},expression:"watchChecked"}})],1):t._e(),t.price>0&&3!==t.type&&2!==t.type&&0!==t.type&&4!==t.type&&5!==t.type&&1!==t.payType&&0!==t.payType?i("qui-cell-item",{attrs:{title:t.i18n.t("discuzq.post.freeWordCount"),addon:t.i18n.t("discuzq.post.word",{num:t.percentagedisplay}),arrow:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cellClick("word")}}}):t._e(),6===t.type?i("v-uni-view",[t.isShowGoods&&6===t.type&&t.dataGoodInfo?i("v-uni-view",{staticClass:"post-box__good"},[i("v-uni-view",[i("v-uni-image",{staticClass:"post-box__good__image",attrs:{"lazy-load":!0,src:t.dataGoodInfo.image_path}})],1),i("v-uni-view",{staticClass:"post-box__good__info"},[i("v-uni-view",{staticClass:"post-box__good__title"},[t._v(t._s(t.dataGoodInfo.title))]),i("v-uni-view",{staticClass:"post-box__good__ft",style:{justifyContent:""!==t.dataGoodInfoPrice?"space-between":"flex-end"}},[""!==t.dataGoodInfoPrice?i("v-uni-view",{staticClass:"post-box__good__price"},[t._v("￥"+t._s(t.dataGoodInfoPrice)+"元")]):t._e(),i("qui-icon",{attrs:{name:"icon-delete",size:"26"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteGoods.apply(void 0,arguments)}}})],1)],1)],1):i("v-uni-view",{staticClass:"post-box__space",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addGoods.apply(void 0,arguments)}}},[i("qui-icon",{attrs:{name:"icon-add",size:"26"}})],1)],1):t._e(),t.forums.lbs&&t.forums.lbs.lbs?i("v-uni-view",{staticClass:"post-box__position"},[i("qui-cell-item",{attrs:{arrow:!0,"slot-left":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choosePosition.apply(void 0,arguments)}}},[i("v-uni-view",[i("qui-icon",{attrs:{name:"icon-weizhi",size:"35",color:"#777"}}),i("v-uni-text",[t._v(t._s(t.currentPosition&&t.currentPosition.location?t.currentPosition.location:t.i18n.t("discuzq.post.addPosition")))])],1)],1),t.currentPosition&&t.currentPosition.location?i("qui-icon",{attrs:{name:"icon-close1",size:"32",color:"#ccc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearPosition.apply(void 0,arguments)}}}):t._e()],1):t._e(),i("v-uni-view",{staticClass:"post-box__ft"},[i("v-uni-text",{staticClass:"post-box__ft-tit"},[t._v(t._s(t.i18n.t("discuzq.post.chooseCategory")))]),i("v-uni-view",{staticClass:"post-box__ft-categories"},t._l(t.allCategories,(function(e,o){return i("qui-button",{key:e._jv.id,class:Number(e._jv.id)===Number(t.categoryId)?"cateActive":"",attrs:{type:Number(e._jv.id)===Number(t.categoryId)?"primary":"",plain:Number(e._jv.id)===Number(t.categoryId)},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.checkClass(e,o)}}},[t._v(t._s(e.name))])})),1),5!==t.type?i("qui-button",{attrs:{loading:t.postLoading,type:"primary",size:"large",id:"TencentCaptcha","data-appid":t.forums.qcloud&&t.forums.qcloud.qcloud_captcha_app_id||"",disabled:t.textAreaValue.length>t.textAreaLength},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.postClick.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.t("discuzq.post.post")))]):t._e(),5===t.type?i("qui-button",{attrs:{loading:t.postLoading,type:"primary",size:"large",id:"TencentCaptcha","data-appid":t.forums.qcloud&&t.forums.qcloud.qcloud_captcha_app_id||"",disabled:t.textAreaValue.length>t.textAreaLength},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.postAnswerClick.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.t("discuzq.post.nextPay")))]):t._e()],1),t.payShowStatus?i("v-uni-view",[i("qui-pay",{ref:"payShow",attrs:{"pay-type":t.payTypeText,money:t.priceAsk,"wallet-status":t.user.canWalletPay,balance:Number(t.user.walletBalance),"pay-password":t.pwdVal,"pay-type-data":t.payTypeData,"to-name":t.beUserName},on:{paysureShow:function(e){arguments[0]=e=t.$handleEvent(e),t.paysureShow.apply(void 0,arguments)},onInput:function(e){arguments[0]=e=t.$handleEvent(e),t.onInput.apply(void 0,arguments)},radioChange:function(e){arguments[0]=e=t.$handleEvent(e),t.radioChange.apply(void 0,arguments)}}})],1):t._e(),i("uni-popup",{ref:"lookPayPopup",attrs:{type:"bottom"}},[i("v-uni-view",{staticClass:"popup-share"},[i("v-uni-view",{staticClass:"pay-type",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choicePayType(0)}}},[t._v(t._s(t.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsFree")))]),1===t.type&&t.canUploadAttachment?i("v-uni-view",{staticClass:"pay-type",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choicePayType(1)}}},[t._v(t._s(t.i18n.t("discuzq.post.TheContentIsFreeAndTheAccessoriesArePaid")))]):t._e(),i("v-uni-view",{staticClass:"pay-type",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choicePayType(2)}}},[t._v(t._s(t.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsPaid")))]),i("v-uni-view",{staticClass:"popup-share-content-space"}),i("v-uni-text",{staticClass:"popup-share-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelLookPay()}}},[t._v(t._s(t.i18n.t("discuzq.post.cancel")))])],1)],1),i("uni-popup",{ref:"popupBtm",attrs:{type:"bottom"}},[i("v-uni-view",{staticClass:"popup-share"},[i("v-uni-view",{staticClass:"popup-share-content"},[5!==t.type?i("v-uni-text",{staticClass:"popup-title"},[t._v(t._s("pay"===t.setType?t.i18n.t("discuzq.post.selectToViewPaymentAmount"):t.i18n.t("discuzq.post.selectToViewFreeWordCount")))]):t._e(),"pay"===t.setType&&5===t.type?i("v-uni-text",{staticClass:"popup-title"},[t._v(t._s(t.i18n.t("discuzq.post.supportTheAuthorToContinueToCreate")))]):t._e(),"pay"===t.setType?i("v-uni-view",{staticClass:"popup-content-btn"},t._l(t.payNum,(function(e,o){return i("qui-button",{key:o,staticClass:"popup-btn",attrs:{type:t.payNumCheck.length>0&&t.payNumCheck[0].name===e.name?"primary":"post",plain:!0,size:"post"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.moneyClick(o)}}},[t._v(t._s(e.name))])})),1):t._e(),"word"===t.setType?i("v-uni-view",{staticClass:"popup-content-btn"},t._l(t.freepercentage,(function(e,o){return i("qui-button",{key:o,staticClass:"popup-btn",attrs:{type:t.freewords.length>0&&t.freewords[0].name===e.name?"primary":"post",plain:!0,size:"post"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.percentageClick(o)}}},[t._v(t._s(e.name))])})),1):t._e()],1),i("v-uni-view",{staticClass:"popup-share-content-space"}),i("v-uni-text",{staticClass:"popup-share-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel()}}},[t._v(t._s(t.i18n.t("discuzq.post.cancel")))])],1)],1),t.popupStatus?i("v-uni-view",[i("uni-popup",{ref:"popup",attrs:{type:"center"}},[i("v-uni-view",{staticClass:"popup-dialog"},[i("v-uni-view",{staticClass:"popup-dialog__top"},[i("v-uni-text",[t._v(t._s("pay"===t.setType?t.i18n.t("discuzq.post.enterToViewPaymentAmount"):t.i18n.t("discuzq.post.enterTheWordCount")))])],1),i("v-uni-view",{staticClass:"popup-dialog__cont"},["pay"===t.setType?i("qui-icon",{staticClass:"popup-dialog__cont-rmb",attrs:{name:"icon-rmb",size:"40"}}):i("v-uni-text",{staticClass:"popup-dialog__cont-rmb"},[t._v(t._s(t.i18n.t("discuzq.post.word",{num:""})))]),"pay"===t.setType?i("v-uni-input",{staticClass:"popup-dialog__cont-input",attrs:{type:"digit",placeholder:"0.0",maxlength:t.maxLength,focus:"pay"===t.setType},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.checkNum.apply(void 0,arguments)}},model:{value:t.inputPrice,callback:function(e){t.inputPrice=e},expression:"inputPrice"}}):i("v-uni-input",{staticClass:"popup-dialog__cont-input",attrs:{type:"digit",placeholder:"0",maxlength:5,focus:"word"===t.setType},model:{value:t.inputWord,callback:function(e){t.inputWord=e},expression:"inputWord"}})],1),i("v-uni-view",{staticClass:"popup-dialog__ft"},[i("v-uni-button",{staticClass:"popup-btn--close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.diaLogClose.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.t("discuzq.close")))]),"pay"===t.setType?i("v-uni-button",{staticClass:"popup-btn--ok",class:t.inputPrice>0?"popup-btn--ok--blue":"",attrs:{disabled:""===t.inputPrice},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.diaLogOk.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.t("discuzq.ok")))]):i("v-uni-button",{staticClass:"popup-btn--ok",class:t.inputWord>0?"popup-btn--ok--blue":"",attrs:{disabled:""===t.inputWord},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.diaLogOk.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.t("discuzq.ok")))])],1)],1)],1)],1):t._e(),i("uni-popup",{ref:"deletePopup",attrs:{type:"center"}},[i("uni-popup-dialog",{attrs:{type:"warn",content:t.deleteTip,"before-close":!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClickCancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClickOk.apply(void 0,arguments)}}})],1),i("uni-popup",{ref:"wechatPopup",attrs:{type:"center"}},[i("uni-popup-dialog",{attrs:{type:"warn",content:t.wechatTip,"before-close":!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.handleWechatClickCancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.handleWechatClickOk.apply(void 0,arguments)}}})],1),i("qui-toast",{ref:"toast"}),t.coverLoading?i("qui-loading-cover",{attrs:{"mask-zindex":"111"}}):t._e()],1):t._e()],1)},n=[]}).call(this,i("5a52").default)},"35ab":function(t,e,i){"use strict";i("d3b7"),i("25f0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=0,i=0;i<t.length;i++)e+=t.charCodeAt(i);var o=function(t,e,i){var o,a,n,s=Math.floor(6*t),r=6*t-s,c=i*(1-e),u=i*(1-r*e),d=i*(1-(1-r)*e);switch(s%6){case 0:o=i,a=d,n=c;break;case 1:o=u,a=i,n=c;break;case 2:o=c,a=i,n=d;break;case 3:o=c,a=u,n=i;break;case 4:o=d,a=c,n=i;break;case 5:o=i,a=c,n=u}return{r:Math.floor(255*o),g:Math.floor(255*a),b:Math.floor(255*n)}}(e%360/360,.3,.9);return""+o.r.toString(16)+o.g.toString(16)+o.b.toString(16)}},"368d":function(t,e,i){t.exports=i.p+"static/img/msg-warning.0c78a551.svg"},"3bd0":function(t,e,i){"use strict";i.r(e);var o=i("cfc0"),a=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);e.default=a.a},6354:function(module,exports,__webpack_require__){__webpack_require__("a4d3"),__webpack_require__("e01a"),__webpack_require__("d28b"),__webpack_require__("944a"),__webpack_require__("99af"),__webpack_require__("c975"),__webpack_require__("a15b"),__webpack_require__("d81d"),__webpack_require__("fb6a"),__webpack_require__("f4b3"),__webpack_require__("0c47"),__webpack_require__("23dc"),__webpack_require__("a9e3"),__webpack_require__("e439"),__webpack_require__("d3b7"),__webpack_require__("acd8"),__webpack_require__("e25e"),__webpack_require__("ac1f"),__webpack_require__("25f0"),__webpack_require__("3ca3"),__webpack_require__("466d"),__webpack_require__("5319"),__webpack_require__("841c"),__webpack_require__("1276"),__webpack_require__("ddb0"),__webpack_require__("2b3d"),__webpack_require__("bf19");var _objectSpread=__webpack_require__("ded3"),_typeof2=__webpack_require__("7037");!function(t){var e={};function i(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===_typeof2(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=16)}([function(t,e,i){function o(){return Math.floor(1e8*Math.random())}var a=function(t){t=t?1:0;try{return location.search.substr(t)}catch(o){try{var e=document.URL,i=e.indexOf("?");if(i>=0)return e.substr(i+t)}catch(t){}}return""},n={};!function(){for(var t=a(!0).split("&"),e=0;e<t.length;e++){var i=/(.*?)=(.*)/.exec(t[e]);i&&(n[i[1]]=i[2])}}(),t.exports={href:function(){try{return location.href}catch(t){try{return document.URL}catch(t){}}return""},getQuery:function(t){var e=a();return t=t?1:0,(e=e?"".concat(e.replace(/&rand=[^&]+/,""),"&rand=").concat(o()):"?rand=".concat(o())).substr(t)},queryParam:function(t){return n[t]},queryMap:function(){return $.extend({},n)},parse2rgb:function(t){if(!t||"string"!=typeof t)return null;t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,o){return e+e+i+i+o+o}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),s:"#".concat(e[1]).concat(e[2]).concat(e[3])}:null},arrIndexOf:function(t,e){if("function"==typeof t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}}},function(t,e,i){var o=function(){var t=1,e=/subsid=(\d+)/.exec(location.href);e&&(t=parseInt(e[1],10)+1);var i=function(e,i){var o=i||t;return e=/subsid=\d+/.test(e)?e.replace(/subsid=\d+/g,"subsid=".concat(o)):"".concat(e,"&subsid=").concat(o),i||t++,e};return i.get=function(){return t},i.bind=function(){var e=t++;return function(t){return i(t,e)}},i}();t.exports=o},function(t,e,i){var o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,r=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===a.call(t)},c=function(t){if(!t||"[object Object]"!==a.call(t))return!1;var e,i=o.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!i&&!n)return!1;for(e in t);return void 0===e||o.call(t,e)},u=function(t,e){n&&"__proto__"===e.name?n(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},d=function(t,e){if("__proto__"===e){if(!o.call(t,e))return;if(s)return s(t,e).value}return t[e]};t.exports=function t(){var e,i,o,a,n,s,p=arguments[0],l=1,h=arguments.length,f=!1;for("boolean"==typeof p&&(f=p,p=arguments[1]||{},l=2),(null==p||"object"!==_typeof2(p)&&"function"!=typeof p)&&(p={});l<h;++l)if(null!=(e=arguments[l]))for(i in e)o=d(p,i),p!==(a=d(e,i))&&(f&&a&&(c(a)||(n=r(a)))?(n?(n=!1,s=o&&r(o)?o:[]):s=o&&c(o)?o:{},u(p,{name:i,newValue:t(f,s,a)})):void 0!==a&&u(p,{name:i,newValue:a}));return p}},function(t,e,i){var o,a,n=i(1),s={ERROR_TYPE_FRAMEJS_DOWNLOAD_FAIL:16,ERROR_TYPE_JSONP_PREHANDLE:17,ERROR_TYPE_FRAMEJS_CODE_ERROR:18,CALLBACK_NAME:19},r={ERROR_TYPE_FRAMEJS_DOWNLOAD_FAIL:"ERROR_TYPE_FRAMEJS_DOWNLOAD_FAIL",ERROR_TYPE_JSONP_PREHANDLE:"ERROR_TYPE_JSONP_PREHANDLE",ERROR_TYPE_FRAMEJS_CODE_ERROR:"ERROR_TYPE_FRAMEJS_CODE_ERROR",CALLBACK_NAME:"CALLBACK_NAME"},c=(o=document.referrer,a=location.href||document.URL,o=o.length>512?o.substr(0,512):o,a=a.length>1024?a.substr(0,1024):a,["referer=".concat(encodeURIComponent(o)),"href=".concat(encodeURIComponent(a))].join("&"));t.exports={type:s,send:function(t,e,i){try{(i=i||r[t]).length>1024&&i.substr(0,1024);var o=["type=".concat(t=s[t]),"appid=".concat(e),"reason=".concat(encodeURIComponent(i))],a="https://aq.qq.com/cn2/manage/mbtoken/cap_monitor?".concat(c,"&").concat(o.join("&"));(new Image).src=n(a)}catch(t){}},perfectStack:function(t){var e="";t&&t.stack&&(e=t.stack.replace(/\n/gi,"").split(/\bat\b/).join("\n").replace(/\?[^:]+/gi,""));try{var i=t.toString();e.indexOf(i)<0&&(e="".concat(i,"@").concat(e))}catch(t){}return e}}},,function(t,e,i){t.exports={add:function(t,e,i){t&&(t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on".concat(e),i):t["on".concat(e)]=i)},remove:function(t,e,i){t&&(t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on".concat(e),i):t["on".concat(e)]=null)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i,o=t[1]||"",a=t[3];if(!a)return o;if(e&&"function"==typeof btoa){var n=(i=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),s=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot).concat(t," */")}));return[o].concat(s).concat([n]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(i,"}"):i})).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},a=0;a<this.length;a++){var n=this[a][0];"number"==typeof n&&(o[n]=!0)}for(a=0;a<t.length;a++){var s=t[a];"number"==typeof s[0]&&o[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="(".concat(s[2],") and (").concat(i,")")),e.push(s))}},e}},function(t,e){var i,o={},a=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},n=a((function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())})),s=a((function(){return document.head||document.getElementsByTagName("head")[0]})),r=null,c=0;function u(t,e){for(var i=0;i<t.length;i++){var a=t[i],n=o[a.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](a.parts[s]);for(;s<a.parts.length;s++)n.parts.push(h(a.parts[s],e))}else{var r=[];for(s=0;s<a.parts.length;s++)r.push(h(a.parts[s],e));o[a.id]={id:a.id,refs:1,parts:r}}}}function d(t){for(var e=[],i={},o=0;o<t.length;o++){var a=t[o],n=a[0],s={css:a[1],media:a[2],sourceMap:a[3]};i[n]?i[n].parts.push(s):e.push(i[n]={id:n,parts:[s]})}return e}function p(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);t.apply(e,i.concat(o))}}function l(){var t=document.createElement("style"),e=s();return t.type="text/css",e.appendChild(t),t}function h(t,e){var i,o,a,n,u;if(e.singleton){var d=c++;i=r||(r=l()),o=p(g,null,i,d,!1),a=p(g,null,i,d,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=document.createElement("link"),u=s(),n.rel="stylesheet",u.appendChild(n),o=p(m,null,i=n),a=function(){i.parentNode.removeChild(i),i.href&&URL.revokeObjectURL(i.href)}):(i=l(),o=p(y,null,i),a=function(){i.parentNode.removeChild(i)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else a()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!==("undefined"==typeof document?"undefined":_typeof2(document)))throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(e=e||{}).singleton&&(e.singleton=n());var i=d(t);return u(i,e),function(t){for(var a=[],n=0;n<i.length;n++){var s=i[n];(r=o[s.id]).refs--,a.push(r)}for(t&&u(d(t),e),n=0;n<a.length;n++){var r;if(0===(r=a[n]).refs){for(var c=0;c<r.parts.length;c++)r.parts[c]();delete o[r.id]}}}};var f=(i=[],function(t,e){var o=[];i[t]=e;for(var a=0;a<i.length;a++)i[a]&&o.push(i[a]);return o.join("\n")});function g(t,e,i,o){var a=i?"":o.css;if(t.styleSheet)t.styleSheet.cssText=f(e,a);else{var n=document.createTextNode(a),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(n,s[e]):t.appendChild(n)}}function y(t,e){var i=e.css,o=e.media;if(e.sourceMap,o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function m(t,e){var i=e.css,o=(e.media,e.sourceMap);o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */"));var a=new Blob([i],{type:"text/css"}),n=t.href;t.href=URL.createObjectURL(a),n&&URL.revokeObjectURL(n)}},function(module,exports,__webpack_require__){var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(t){return t<10?"0".concat(t):t}function this_value(){return this.valueOf()}function quote(t){return rx_escapable.lastIndex=0,rx_escapable.test(t)?'"'.concat(t.replace(rx_escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u".concat("0000".concat(t.charCodeAt(0).toString(16)).slice(-4))})),'"'):'"'.concat(t,'"')}function str(t,e){var i,o,a,n,s,r=gap,c=e[t];switch(c&&"object"===(void 0===c?"undefined":_typeof(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),void 0===c?"undefined":_typeof(c)){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(c)){for(n=c.length,i=0;i<n;i+=1)s[i]=str(i,c)||"null";return a=0===s.length?"[]":gap?"[\n".concat(gap).concat(s.join(",\n".concat(gap)),"\n").concat(r,"]"):"[".concat(s.join(","),"]"),gap=r,a}if(rep&&"object"===(void 0===rep?"undefined":_typeof(rep)))for(n=rep.length,i=0;i<n;i+=1)"string"==typeof rep[i]&&(a=str(o=rep[i],c))&&s.push(quote(o)+(gap?": ":":")+a);else for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(a=str(o,c))&&s.push(quote(o)+(gap?": ":":")+a);return a=0===s.length?"{}":gap?"{\n".concat(gap).concat(s.join(",\n".concat(gap)),"\n").concat(r,"}"):"{".concat(s.join(","),"}"),gap=r,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?"".concat(this.getUTCFullYear(),"-").concat(f(this.getUTCMonth()+1),"-").concat(f(this.getUTCDate()),"T").concat(f(this.getUTCHours()),":").concat(f(this.getUTCMinutes()),":").concat(f(this.getUTCSeconds()),"Z"):null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,i){var o;if(gap="",indent="","number"==typeof i)for(o=0;o<i;o+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!==(void 0===e?"undefined":_typeof(e))||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,o,a=t[e];if(a&&"object"===(void 0===a?"undefined":_typeof(a)))for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(void 0!==(o=walk(a,i))?a[i]=o:delete a[i]);return reviver.call(t,e,a)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,(function(t){return"\\u".concat("0000".concat(t.charCodeAt(0).toString(16)).slice(-4))}))),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("(".concat(text,")")),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},function(t,e,i){var o="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},a="[CODE_VERIFY]",n="postMessage"in window;function s(t,e,i){var a="";if(arguments.length<2?a="[Msger] error 1":"object"!=(void 0===t?"undefined":o(t))?a="[Msger] error 2":"string"!=typeof e&&(a="[Msger] error 3"),a)throw new Error(a);this.target=t,this.name=e,this.domain=i||"*"}function r(t,e){this.targets={},this.name=t,this.listenFunc=[],"string"!=typeof(a=e||a)&&(a=a.toString()),this.initListen()}s.prototype.send=n?function(t){this.target.postMessage(t,this.domain)}:function(t){var e=window.navigator[a+this.name];if("function"!=typeof e)throw new Error("target callback function is not defined");e(t,window)},r.prototype.addTarget=function(t,e,i){var o=new s(t,e,i);this.targets[e]=o},r.prototype.initListen=function(){var t=this,e=function(e){"object"==(void 0===e?"undefined":o(e))&&e.data&&(e=e.data);for(var i=0;i<t.listenFunc.length;i++)t.listenFunc[i](e)};n?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[a+this.name]=e},r.prototype.listen=function(t){this.listenFunc.push(t)},r.prototype.clear=function(){this.listenFunc=[]},r.prototype.send=function(t){var e,i=this.targets;for(e in i)i.hasOwnProperty(e)&&i[e].send(t)},window.TCapMsg=r,t.exports=r},,,,,,,function(module,exports,__webpack_require__){var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)};if(!0===window.__TencentCaptchaExists__)throw new Error("请勿多次引用腾讯验证码的接入js");window.__TencentCaptchaExists__=!0,__webpack_require__(17),__webpack_require__(8);var Messenger=__webpack_require__(9),domReady=__webpack_require__(19),btoa=window.btoa||__webpack_require__(20),extend=Object.assign||__webpack_require__(2),loadScript=__webpack_require__(21),eventListener=__webpack_require__(5),Executor=__webpack_require__(22),isIEVar=__webpack_require__(23),isElement=__webpack_require__(24),invisibleIframe=__webpack_require__(25),getScriptDomain=__webpack_require__(26),scriptDomain=getScriptDomain()||"",isWechatDevtools=navigator.userAgent&&/wechatdevtools/.test(navigator.userAgent),isWindows=/windows/i.test(navigator.userAgent),isMobile=!isWindows&&("ontouchstart"in window||"ontouchstart"in document.createElement("div")||isWechatDevtools),capDomain="https://ssl.captcha.qq.com";capDomain||(capDomain=scriptDomain);var grayscaleFrameJs="/tcaptcha-frame.2de3157b.js",grayscaleThreshold=1,grayscaleAppId=["123","2100049389","2100049390","2046103261","2070173641","2060075756"],grayscaleProb=Math.random(),needGrayscaleJs=void 0,jsLoadStatus="none",capError=__webpack_require__(3),preVerifyData={},capObj=void 0,initQueue=[],defaultOpt={type:"popup",pos:isIEVar(6)?"absolute":"fixed",lang:2052,showHeader:isMobile,needFeedBack:!0,themeColor:"",tcaptchaFlag:!0,gettype:"cap_union_prehandle",domain:capDomain,htdoc_path:capDomain},noop=function(){},isGrayscaleAppId=function(t){if(void 0!==needGrayscaleJs)return needGrayscaleJs;for(var e=0,i=grayscaleAppId.length;e<i;e++)if(t==grayscaleAppId[e])return needGrayscaleJs=!0;return needGrayscaleJs=!1},callbackWrap=function(t,e){return function(i){"object"===(void 0===i?"undefined":_typeof(i))&&(i=_objectSpread({bizState:t.options.bizState,appid:t.options.appid},i)),e&&e(i)}},executor=new Executor((function(){if(initQueue.length>0){for(var t=0;t<initQueue.length;t++)initQueue[t].show();initQueue.length=0}}),0),Captcha=function Captcha($btn,appid,_tcallback_,opts){var bizState=void 0;if(isElement($btn))if(appid&&"object"===(void 0===appid?"undefined":_typeof(appid)))opts=appid,appid=null,_tcallback_=null;else{if(appid=appid||$btn.getAttribute("data-appid"),!_tcallback_){var callbackName=$btn.getAttribute("data-cbfn");try{_tcallback_=eval("window.".concat(callbackName))}catch(t){throw new Error("Lost `callback`")}}bizState=$btn.getAttribute("data-biz-state")}else{if("string"!=typeof $btn||"function"!=typeof appid)throw new Error("Arguments error.");opts=_tcallback_,_tcallback_=appid,appid=$btn,$btn=null}opts=opts||{},opts.callback=_tcallback_||opts.callback,opts.start=opts.start||noop,opts.end=opts.end||noop;var readyCallback="function"==typeof opts.ready?opts.ready:noop;if(opts.ready=function(t){readyCallback.call(this,t)},opts.appid=appid||opts.appid,opts.bizState=bizState||opts.bizState,opts.fwidth=parseFloat(opts.fwidth)||0,opts.sdkOpts=opts.sdkOpts||null,opts.ele=$btn,this.options=opts,"function"!=typeof opts.callback)throw new Error("Lost `callback`");if(this.initOpts=_objectSpread(_objectSpread({},defaultOpt),opts),this.langFun(),$btn){var that=this;eventListener.add($btn,"click",(function(){that.show()}))}};Captcha.prototype={show:function(){if(executor.isDone)this.__show__();else{for(var t=0;t<initQueue.length;t++)if(initQueue[t]===this)return;initQueue.push(this)}},__show__:function(){var t=this.initOpts;if(void 0===window.AqSCode)return capError.send("ERROR_TYPE_FRAMEJS_CODE_ERROR",t.appid),alert("页面加载异常，请刷新页面重试");this.destroy();var e=[];for(var i in e.push("aid=".concat(t.appid)),e.push("accver=1"),e.push("showtype=".concat(t.type)),e.push("ua=".concat(encodeURIComponent(btoa((navigator.userAgent||"").replace(/[\u00ff-\uffff]+/g,""))))),e.push("noheader=".concat("false"=="".concat(t.showHeader)?"1":"0")),e.push("fb=".concat("false"=="".concat(t.needFeedBack)?"0":"1")),e.push("enableDarkMode=".concat(t.enableDarkMode?"1":"0")),t.sid&&e.push("sid=".concat(t.sid)),preVerifyData)preVerifyData[i]&&e.push("".concat(i,"=").concat(encodeURIComponent(preVerifyData[i])));t.uid="".concat(t.uin||""),needGrayscaleJs&&(e.push("grayscale=1"),t.grayscale=1),isMobile?(e.push("clientype=1"),t.clientype=1,t.forceLang&&e.push("lang=".concat(t.forceLang)),t.params="?".concat(e.join("&"))):(e.push("clientype=2"),t.clientype=2,needGrayscaleJs&&t.forceLang&&e.push("lang=".concat(t.forceLang)),t.params="?".concat(e.join("&")),t.s_type_suffix="?".concat(e.join("&")),t.src="".concat(capDomain,"/template/new_placeholder.html").concat(t.s_type_suffix),t.s_type="".concat(capDomain,"/cap_union_prehandle").concat(t.s_type_suffix),t.slide_src="".concat(capDomain,"/template/new_slide_placeholder.html").concat(t.s_type_suffix),t.fb="false"=="".concat(t.needFeedBack)?"0":"1"),(capObj=new AqSCode(t)).listen(callbackWrap(this,t.callback),callbackWrap(this,t.ready)),capObj.start(callbackWrap(t.start)),capObj.end(callbackWrap(t.end)),(needGrayscaleJs||isMobile)&&((t.top||t.left)&&capObj.initPos({top:t.top||void 0,left:t.left||void 0}),capObj.create())},langFun:function(){if(this.initOpts.forceLang){var t={"zh-cn":"2052","zh-hk":"1028",en:"1033"},e=this.initOpts.forceLang;t[e]?(this.initOpts.lang=t[e],this.initOpts.forceLang=t[e],this.initOpts.forcestyle=1):this.initOpts.forceLang=""}},destroy:function(){capObj&&capObj.destroy&&capObj.destroy()},refresh:function(){capObj&&capObj.refresh&&capObj.refresh()},getTicket:function(){if(capObj&&capObj.getTicket){var t=null;return callbackWrap(this,(function(e){t=e}))(capObj.getTicket()),t}return null}};var autoBindBtn=function(){var t=document.getElementById("TencentCaptcha");t&&new Captcha(t)};executor.exec((function(t){domReady((function(){try{autoBindBtn()}catch(t){}new Messenger("TCaptchaVerifyDetect").listen((function(t){if(t&&"object"===(void 0===t?"undefined":_typeof(t)))switch(t.type){case"preVerify":extend(preVerifyData,t.data)}}));try{invisibleIframe("".concat(capDomain,"/template/captcha-pre-verify.html"))}catch(t){}t()}))})),executor.exec((function(t){jsLoadStatus="loading",needGrayscaleJs=!0,loadScript(grayscaleFrameJs,capDomain,capDomain,(function(){return!!window.AqSCode}),(function(){jsLoadStatus="loaded",t()}),(function(){jsLoadStatus="none",capError.send("ERROR_TYPE_FRAMEJS_DOWNLOAD_FAIL"),t()}))})),window.TencentCaptcha=Captcha},function(t,e,i){var o=i(18);"string"==typeof o&&(o=[[t.i,o,""]]),i(7)(o,{}),o.locals&&(t.exports=o.locals)},function(t,e,i){(t.exports=i(6)(!1)).push([t.i,"@keyframes animate_dots{0%{opacity:1}to{opacity:0}}@-webkit-keyframes animate_dots{0%{opacity:1}to{opacity:0}}.dot0,.dot1{animation:animate_dots .9s infinite;-moz-animation:animate_dots .9s infinite;-webkit-animation:animate_dots .9s infinite;-o-animation:animate_dots .9s infinite}.dot1{animation-delay:.2s;-webkit-animation-delay:.2s}.dot2{animation:animate_dots .9s infinite;-moz-animation:animate_dots .9s infinite;-webkit-animation:animate_dots .9s infinite;-o-animation:animate_dots .9s infinite;animation-delay:.4s;-webkit-animation-delay:.4s}.dots_item{display:inline-block;margin-right:5px;width:10px;height:10px;border-radius:50%;background:#4886ff}.verify-icon{position:absolute;width:100%;margin-top:70px;text-align:center}.t-mask{width:100%;height:100%;position:fixed;_position:absolute;left:0;top:0;background:#000;opacity:.5;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50);z-index:2000000000}",""])},function(t,e,i){t.exports=function(t){var e,i=[],o=document,a=o.documentElement,n=a.doScroll,s=(n?/^loaded|^c/:/^loaded|c/).test(o.readyState);function r(t){for(s=1;t=i.shift();)t()}return o.addEventListener&&o.addEventListener("DOMContentLoaded",e=function(){o.removeEventListener("DOMContentLoaded",e,!1),r()},!1),n&&o.attachEvent("onreadystatechange",e=function(){/^c/.test(o.readyState)&&(o.detachEvent("onreadystatechange",e),r())}),t=n?function(e){self!=top?s?e():i.push(e):function(){try{a.doScroll("left")}catch(i){return setTimeout((function(){t(e)}),50)}e()}()}:function(t){s?t():i.push(t)}}()},function(t,e,i){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[o.charAt(i>>>18),o.charAt(i>>>12&63),e>=2?"=":o.charAt(i>>>6&63),e>=1?"=":o.charAt(63&i)].join("")};t.exports=function(t){return t.replace(/[\s\S]{1,3}/g,a)}},function(t,e,i){t.exports=function t(e,i,o,a,n,s,r){r=r||1;var c=!1,u=document.createElement("script");function d(t){c||(t&&"load"===t.type||/^(loaded|complete)$/.test(this.readyState))&&(a()?(c=!0,n&&n()):p())}u.type="text/javascript",u.async=!0,u.src=(r>1?o:i)+e,"onload"in u?u.onload=d:u.onreadystatechange=d;var p=function(){c||(c=!0,r>=2?s&&s():t(e,i,o,a,n,s,r+1))};u.onerror=p,document.getElementsByTagName("head").item(0).appendChild(u)}},function(t,e,i){var o=function(t,e){this.i=0,this.doneCallback=t,this.isDone=!1,this.timeout=e||0;var i=this;this.immediateExec=setTimeout((function(){i.doneCheck()}),0)};o.prototype={doneCheck:function(t,e){try{t&&t(e)}catch(t){}if(this.i--,this.i<=0)try{this.isDone=!0,this.doneCallback()}catch(t){}},exec:function(t,e,i){clearTimeout(this.immediateExec);var o=!1,a="",n=this;this.i++,this.i>0&&(this.isDone=!1);try{(a=t((function(t){o||(o=!0,setTimeout((function(){n.doneCheck(e,t)}),0))})))&&(o=!0,setTimeout((function(){n.doneCheck(e,a)}),0))}catch(t){}(i=i||this.timeout||0)>0&&setTimeout((function(){o||(o=!0,n.doneCheck(e,""))}),i)}},t.exports=o},function(t,e,i){t.exports=function(t){var e=document.createElement("b");return e.innerHTML="\x3c!--[if IE ".concat(t,"]><i></i><![endif]--\x3e"),e.getElementsByTagName("i")&&1===e.getElementsByTagName("i").length}},function(t,e,i){var o="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)};t.exports=function(t){try{return t instanceof HTMLElement}catch(e){return"object"===(void 0===t?"undefined":o(t))&&1===t.nodeType&&"object"===o(t.style)&&"object"===o(t.ownerDocument)}}},function(t,e,i){t.exports=function(t){var e=document.createElement("iframe");return e.src=t,e.style.cssText="width: 0px; height: 0px; display: none;",(document.body||document.getElementsByTagName("body").item("0")).appendChild(e),e}},function(t,e,i){var o=i(0).href;t.exports=function(){try{var t=document.getElementById("CaptchaScript")||function(){for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++){var i=t[e];if(i.src.match(/captcha\.js/i))return i}}()||"";if(!t)return"";var e=t.src,i=function(t){var e=t.split("?");if(2!==e.length)return{};for(var i=e[1]&&e[1].split("&"),o={},a=0;a<i.length;a++){var n=i[a].split("=");n[1]&&(o[n[0]]=decodeURIComponent(n[1]))}return o}(e).domain;if(i)return i;var a=/(https?\:\/\/[0-9a-zA-Z-:\.]+)\//i,n=e.match(a)||o().match(a);return n?n[1]:""}catch(t){return""}}}])},"6f74":function(t,e,i){"use strict";var o=i("b95e");t.exports={computed:{user:function(){var t=this.$store.getters["session/get"]("userId");return t?this.$store.getters["jv/get"]("users/".concat(t)):{}}},methods:{getUserInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=(new Date).getTime(),i=uni.getStorageSync(o.STORGE_GET_USER_TIME);if(t||(e-i)/1e3>60){var a={include:"groups,wechat"},n=this.$store.getters["session/get"]("userId");this.$store.commit("jv/deleteRecord",{_jv:{type:"users",id:n}}),this.$store.dispatch("jv/get",["users/".concat(n),{params:a}]).then((function(){return uni.$emit("updateNotiNum")})),uni.setStorageSync(o.STORGE_GET_USER_TIME,(new Date).getTime())}},logind:function(){var t=this,e=this.$store.getters["session/get"]("userId");if(e){this.$store.dispatch("jv/get",["forum",{params:{include:"users"}}]);this.$store.dispatch("jv/get",["users/".concat(e),{params:{include:"groups,wechat"}}]).then((function(e){t.$u.event.$emit("logind",e)})),this.$store.dispatch("forum/setError",{loading:!1})}}}}},"8a88":function(t,e,i){"use strict";var o=i("2ddd");i.d(e,"a",(function(){return o.a})),i.d(e,"b",(function(){return o.b})),i.d(e,"c",(function(){return o.c}))},"913c":function(t,e){t.exports="data:image/png;base64,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"},"98d7":function(t,e,i){"use strict";(function(t){var o=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("d4ec")),n=o(i("bee2")),s=o(i("b900")),r=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,[{key:"startRecord",value:function(t){var e=this;try{s.default.get((function(i){e.recorder=i,e.recorder.start(),t.success("record successfully!")}))}catch(e){t.error("record failed!".concat(e))}}},{key:"stopRecord",value:function(t){try{var e=this.recorder.getBlob();t.success(e)}catch(e){t.error("record stop failed!".concat(e))}}},{key:"play",value:function(e){try{this.recorder.play(e)}catch(e){t.log("play record failed!".concat(e))}}}]),e}();e.default=r}).call(this,i("5a52").default)},a499:function(t,e,i){"use strict";var o=i("ebde");i.n(o).a},b469:function(t,e){t.exports={computed:{forums:function(){return this.$store.getters["jv/get"]("forums/1")}}}},b900:function(t,e,i){"use strict";(function(t){var o=i("4ea4");i("c19f"),i("ace4"),i("b420"),i("d3b7"),i("e25e"),i("25f0"),i("3ca3"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ddb0"),i("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("d4ec")),n=o(i("bee2")),s=function(){function e(t,i){if((0,a.default)(this,e),window.URL=window.URL||window.webkitURL,void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia){var o=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia||navigator.khtmlGetUserMedia;navigator.mediaDevices.getUserMedia=function(t){return o?new Promise((function(e,i){o.call(navigator,t,e,i)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}}(i=i||{}).sampleBits=i.sampleBits||16,i.sampleRate=i.sampleRate||8e3,this.context=new(window.webkitAudioContext||window.AudioContext),this.audioInput=this.context.createMediaStreamSource(t),this.createScript=this.context.createScriptProcessor||this.context.createJavaScriptNode,this.recorder=this.createScript.apply(this.context,[4096,1,1]),this.audioData={size:0,buffer:[],inputSampleRate:this.context.sampleRate,inputSampleBits:16,outputSampleRate:i.sampleRate,oututSampleBits:i.sampleBits,input:function(t){this.buffer.push(new Float32Array(t)),this.size+=t.length},compress:function(){for(var t=new Float32Array(this.size),e=0,i=0;i<this.buffer.length;i+=1)t.set(this.buffer[i],e),e+=this.buffer[i].length;for(var o=parseInt(this.inputSampleRate/this.outputSampleRate,10),a=t.length/o,n=new Float32Array(a),s=0,r=0;s<a;)n[s]=t[r],r+=o,s+=1;return n},encodeWAV:function(){var t=Math.min(this.inputSampleRate,this.outputSampleRate),e=Math.min(this.inputSampleBits,this.oututSampleBits),i=this.compress(),o=i.length*(e/8),a=new ArrayBuffer(44+o),n=new DataView(a),s=0,r=function(t){for(var e=0;e<t.length;e+=1)n.setUint8(s+e,t.charCodeAt(e))};if(r("RIFF"),s+=4,n.setUint32(s,36+o,!0),s+=4,r("WAVE"),s+=4,r("fmt "),s+=4,n.setUint32(s,16,!0),s+=4,n.setUint16(s,1,!0),s+=2,n.setUint16(s,1,!0),s+=2,n.setUint32(s,t,!0),s+=4,n.setUint32(s,1*t*(e/8),!0),s+=4,n.setUint16(s,e/8*1,!0),s+=2,n.setUint16(s,e,!0),s+=2,r("data"),s+=4,n.setUint32(s,o,!0),s+=4,8===e)for(var c=0;c<i.length;c+=1,s+=1){var u=Math.max(-1,Math.min(1,i[c])),d=u<0?32768*u:32767*u;d=parseInt(255/(65535/(d+32768)),10),n.setInt8(s,d,!0)}else for(var p=0;p<i.length;p+=1,s+=2){var l=Math.max(-1,Math.min(1,i[p]));n.setInt16(s,l<0?32768*l:32767*l,!0)}return new Blob([n],{type:"audio/wav"})}}}return(0,n.default)(e,[{key:"start",value:function(){this.audioInput.connect(this.recorder),this.recorder.connect(this.context.destination);var t=this;this.recorder.onaudioprocess=function(e){t.audioData.input(e.inputBuffer.getChannelData(0))}}},{key:"stop",value:function(){this.recorder.disconnect()}},{key:"getBlob",value:function(){return this.stop(),this.audioData.encodeWAV()}},{key:"play",value:function(t){t.src=window.URL.createObjectURL(this.getBlob())}},{key:"clear",value:function(){this.audioData.buffer=[],this.audioData.size=0}}],[{key:"throwError",value:function(e){var i=this;throw t.log("Error:".concat(e)),new function(){i.toString=function(){return e}}}},{key:"canRecording",value:function(){return null!=navigator.mediaDevices.getUserMedia}},{key:"get",value:function(i,o){i&&(e.canRecording()?navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){var a=new e(t,o);i(a)})).catch((function(i){t.log(i),e.throwError("无法录音，请检查设备状态。")})):e.throwError("当前浏览器不支持录音功能。"))}}]),e}();e.default=s}).call(this,i("5a52").default)},c4b7:function(t,e,i){(e=i("24fb")(!1)).push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* eg:\n  .container {\n    color: --color(BG-1);\n  }\n*/.post-box[data-v-1e704c7c]{width:100vw;height:100%;padding:%?40?%;overflow:hidden;background-color:var(--qui-BG-2);box-sizing:border-box}.post-box__title[data-v-1e704c7c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100vw;height:%?100?%;margin-bottom:%?30?%;border-bottom:%?2?% solid var(--qui-BOR-ED)}.post-box__title-input[data-v-1e704c7c]{width:100%;padding-right:%?80?%;font-size:%?36?%}.post-box__titles[data-v-1e704c7c]{margin-bottom:%?30?%}.post-box__hd[data-v-1e704c7c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.post-box__hd-l__icon[data-v-1e704c7c]{margin-right:%?54?%}.post-box__hd-r[data-v-1e704c7c]{font-size:%?26?%;color:var(--qui-FC-777)}.post-box__con[data-v-1e704c7c]{width:100%;padding:%?10?% 0 0;margin-top:%?20?%;overflow:hidden;background-color:var(--qui-BG-1);border:%?1?% solid var(--qui-BOR-DDD);border-radius:%?7?%;box-sizing:border-box}.post-box__con-text[data-v-1e704c7c]{z-index:0;width:100%;max-height:%?900?%;min-height:%?400?%;padding:%?10?% %?20?% %?20?%;font-size:%?30?%;line-height:%?40?%;box-sizing:border-box}.post-box__con-text .text-cover[data-v-1e704c7c]{font-size:%?30?%;line-height:%?40?%}.post-box__con-text--static[data-v-1e704c7c]{overflow:auto}.post-box__ft-tit[data-v-1e704c7c]{display:block;margin:%?30?% 0;font-size:%?30?%;color:var(--qui-FC-7D7979)}.post-box__ft-categories[data-v-1e704c7c]{margin-bottom:%?40?%}.post-box__good[data-v-1e704c7c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;margin:%?30?% 0;font-size:%?28?%}.post-box__good__image[data-v-1e704c7c]{width:%?160?%;height:%?160?%;margin:0 %?30?% 0 0;border-radius:%?5?%}.post-box__good__info[data-v-1e704c7c]{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.post-box__good__title[data-v-1e704c7c]{max-height:%?120?%;overflow:hidden;font-weight:700;line-height:%?40?%;color:var(--qui-FC-333)}.post-box__good__ft[data-v-1e704c7c]{position:absolute;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:%?45?%;color:var(--qui-FC-777)}.post-box__good__price[data-v-1e704c7c]{display:inline-block;font-size:%?36?%;color:var(--qui-RED)}.post-box__good__btn[data-v-1e704c7c]{display:inline-block}.post-box__space[data-v-1e704c7c]{width:100%;height:%?160?%;margin:%?30?% 0;line-height:%?160?%;color:var(--qui-FC-B5);text-align:center;background-color:var(--qui-FC-f7);border:%?1?% solid var(--qui-BOR-ED);border-radius:%?5?%}.post-box__position[data-v-1e704c7c] {position:relative;color:var(--qui-FC-777)}.post-box__position[data-v-1e704c7c] .icon-weizhi{margin-right:%?10?%}.post-box__position[data-v-1e704c7c] .icon-close1{position:absolute;top:%?36?%;right:0;z-index:100}.play-load .post-box__video__play__load__mask[data-v-1e704c7c]{position:absolute;width:100%;height:100%;background-color:var(--qui-BG-ED);border:1px solid var(--qui-BOR-ED);border-radius:%?5?%;opacity:.7}.play-load .post-box__video__play__load__text[data-v-1e704c7c]{position:relative;z-index:2;font-size:%?30?%;line-height:%?36?%;color:var(--qui-FC-34)}.play-load uni-progress[data-v-1e704c7c]{position:absolute;bottom:%?9.5?%;z-index:3;width:87.5%}.post-box__ft-categories[data-v-1e704c7c] .qui-button--button{margin-top:%?10?%;margin-right:%?20?%;margin-bottom:%?10?%}.post-box__ft-categories[data-v-1e704c7c] .qui-button--button[size="default"]{border:1px solid rgba(0,0,0,.2)}.post-box__ft-categories[data-v-1e704c7c] .qui-button--button:after{border:none;border-radius:0}.post-box__ft-categories[data-v-1e704c7c] .cateActive[size="default"]{border:1px solid #1878f3}.popup-content-btn[data-v-1e704c7c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.popup-content-btn .popup-btn[data-v-1e704c7c]{margin-top:%?20?%}.popup-share[data-v-1e704c7c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background:var(--qui-BG-2)}.popup-share-content[data-v-1e704c7c]{height:%?477?%;padding:%?40?% %?45?%;text-align:center;box-sizing:border-box}.popup-share-content .popup-title[data-v-1e704c7c]{font-size:%?30?%}.popup-share-content-space[data-v-1e704c7c]{width:100%;height:%?9?%;background:var(--qui-BG-ED)}.emoji-bd[data-v-1e704c7c]{position:relative;width:100%}[data-v-1e704c7c] uni-textarea .textarea-placeholder{font-size:%?30?%;color:var(--qui-FC-B5)}[data-v-1e704c7c] uni-input .input-placeholder{font-size:%?36?%;color:var(--qui-FC-AAA)}.cell-item-right-text[data-v-1e704c7c] .cell-item__body__right-text{color:var(--qui-RED)}[data-v-1e704c7c] .cell-item__body__right .cell-item__body__right-text{font-size:%?36?%}[data-v-1e704c7c] .cell-item__body__content-title{color:var(--qui-FC-777)}[data-v-1e704c7c] .uni-list-cell{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:%?100?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?30?%;color:var(--qui-FC-777);border-bottom:%?2?% solid #ededed}[data-v-1e704c7c] .my-profile__avatar{position:relative}[data-v-1e704c7c] .avatar-box__r__tit{color:var(--qui-FC-TAG)}[data-v-1e704c7c] .uni-list-cell .uni-list-cell-pd{position:relative}.popup-dialog[data-v-1e704c7c]{width:%?670?%;height:%?342?%;background-color:var(--qui-BG-2);border-radius:%?14?%}.popup-dialog__top[data-v-1e704c7c]{padding-top:%?40?%;text-align:center}.popup-dialog__top uni-text[data-v-1e704c7c]{font-size:%?30?%;color:var(--qui-FC-333)}.popup-dialog__cont[data-v-1e704c7c]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?24?% %?52?% %?40?%}.popup-dialog__cont-rmb[data-v-1e704c7c]{position:absolute;margin-left:%?25?%}.popup-dialog__cont-input[data-v-1e704c7c]{width:100%;height:%?100?%;padding:0 %?25?% 0 %?80?%;font-size:%?40?%;text-align:right;border:1px solid var(--qui-BOR-DDD);border-radius:%?7?%;box-sizing:border-box}.popup-dialog__ft[data-v-1e704c7c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?100?%;border-top:%?2?% solid var(--qui-BOR-DDD);box-sizing:border-box}.popup-dialog__ft uni-button[data-v-1e704c7c]{width:50%;color:var(--qui-FC-777);background-color:var(--qui-BG-2);border-radius:0}.popup-dialog__ft uni-button[data-v-1e704c7c]:after{border:none}.popup-dialog__ft uni-button[data-v-1e704c7c]:last-of-type{border-left:%?2?% solid var(--qui-BOR-DDD);border-bottom-right-radius:%?10?%}.popup-dialog__ft uni-button[data-v-1e704c7c]:first-of-type{border-bottom-left-radius:%?10?%}.popup-dialog__ft .popup-btn--ok--blue[data-v-1e704c7c]{color:var(--qui-BG-HIGH-LIGHT)}[data-v-1e704c7c] .uni-video-cover{display:none}[data-v-1e704c7c] .cell-item__body__right{display:contents}.markdown-box[data-v-1e704c7c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-around;justify-content:space-around;width:100%;height:%?60?%;line-height:%?60?%;background:var(--qui-BG-FFF);border-top:1px solid var(--qui-BOR-DDD)}.username[data-v-1e704c7c]{max-width:%?200?%;overflow:hidden;font-size:%?28?%;text-overflow:ellipsis;white-space:nowrap}.pay-type[data-v-1e704c7c]{font-size:%?30?%;line-height:%?100?%;text-align:center;border-bottom:1px solid var(--qui-BOR-ED)}.watchpay[data-v-1e704c7c]{font-size:%?28?%;color:var(--qui-FC-AAA)}',""]),t.exports=e},cfc0:function(t,e,i){"use strict";(function(t){var o=i("4ea4");i("99af"),i("4160"),i("c975"),i("d81d"),i("fb6a"),i("a434"),i("a9e3"),i("b680"),i("7039"),i("d3b7"),i("acd8"),i("e25e"),i("ac1f"),i("5319"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("ade3"));i("96cf");var n,s=o(i("1da1")),r=o(i("5530")),c=i("2f62"),u=i("b95e"),d=o(i("b469")),p=o(i("6f74")),l=o(i("245f")),h=o(i("6354")),f=o(i("4c82")),g=o(i("25d8")),y=o(i("840a")),m=null,v={name:"Post",components:{uniPopupDialog:y.default},mixins:[d.default,p.default,l.default,h.default,g.default,f.default],data:function(){return{vditor:null,navTitle:"发布",loadStatus:"",textAreaValue:"",markdownShow:!1,barStatus:!1,textAreaLength:5e3,textAnswerLength:49999,postTitle:"",checkClassData:[],type:0,price:0,priceAsk:0,pwdVal:"",browser:0,inputPrice:"",maxLength:7,inputWord:"",operating:"",emojiShow:!1,textShow:!0,header:{},formData:{},captcha:null,captcha_ticket:"",captcha_rand_str:"",userImage:"",beUserName:"",checked:!1,watchChecked:!1,watchShow:!1,payShowStatus:!0,haveDate:0,answerIsDate:0,platformDate:0,askingPrice:!0,payNum:[{name:this.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsFree"),pay:0},{name:"￥2",pay:2},{name:"￥5",pay:5},{name:"￥10",pay:10},{name:"￥20",pay:20},{name:"￥50",pay:50},{name:"￥88",pay:88},{name:"￥128",pay:128},{name:this.i18n.t("discuzq.post.customize"),pay:0}],payNumCheck:[{name:"",pay:0}],freepercentage:[{name:"0%",pay:0},{name:"10%",pay:.1},{name:"30%",pay:.3},{name:"50%",pay:.5},{name:"70%",pay:.7},{name:"100%",pay:1}],freewords:[],percentagedisplay:"0%",uploadFile:[],cursor:0,wordCountCheck:[{name:this.i18n.t("discuzq.post.word",{num:0}),num:0}],word:0,setType:"pay",controlsStatus:!1,videoBeforeList:[],audioBeforeList:[],fullscreenStatus:!1,videoName:"",percent:0,fileId:"",url:"",postLoading:!1,allCategories:[],categoryIndex:"",categoryId:"",threadId:"",firstPostId:"",postDetails:{},filePreview:[],uploadStatus:!0,showHidden:!0,ticket:"",randstr:"",captchaResult:{},attachmentList:[],signatureVal:"",deleteType:"",deleteId:"",deleteIndex:"",deleteTip:"确定删除吗？",wechatTip:this.i18n.t("discuzq.wechatBind"),currentPosition:{},watchMoeny:"1",beAskId:"",payTypeText:"",orderSn:"",coverLoading:!1,payStatus:!1,payTypeData:[{name:"微信支付",icon:"icon-wxPay",color:"#09bb07",value:"0"},{name:"钱包支付",icon:"icon-walletPay",color:"#1878f3",value:"1"}],chooseType:1,payType:0,showPayType:"",ioshide:!1,isShowGoods:!0,dataGoodInfo:{},dataGoodInfoPrice:0,goodsId:"",categoryid:0,categoryindex:0,postShow:!1,popupStatus:!1,canUploadAttachment:!1}},computed:(0,r.default)((0,r.default)({},(0,c.mapState)({getAtMemberData:function(t){return t.atMember.atMemberData}})),{},{showPrice:function(){return 1===this.type?this.i18n.t("discuzq.post.pleaseChoice"):this.i18n.t("discuzq.post.free"),this.price<=0?1===this.type?this.i18n.t("discuzq.post.pleaseChoice"):this.i18n.t("discuzq.post.free"):"￥".concat(this.price+this.i18n.t("discuzq.post.yuan"))},showAskPrice:function(){this.i18n.t("discuzq.post.free");return this.priceAsk<=0?this.i18n.t("discuzq.post.free"):"￥".concat(this.priceAsk+this.i18n.t("discuzq.post.yuan"))},currentLoginId:function(){var t=this.$store.getters["session/get"]("userId");return parseInt(t,10)}}),updated:function(){var t=this;this.forums&&5===this.type&&(this.platformDate=(this.forums.set_site.site_onlooker_price*(this.forums.set_site.site_master_scale/10)).toFixed(2),this.haveDate=((this.forums.set_site.site_onlooker_price-this.platformDate)/2).toFixed(2),this.answerIsDate=(this.forums.set_site.site_onlooker_price-this.platformDate-this.haveDate).toFixed(2)),this.$nextTick((function(){t.$refs.textarea&&(t.$refs.textarea.$refs.textarea.style.overflowY="auto",t.$refs.textarea.$refs.textarea.style.paddingRight="10px")})),uni.$on("uploadVideoOver",(function(e){t.percent=1,e.doneResult&&(t.fileId=e.doneResult.fileId),e.result&&(t.fileId=e.result.fileId)}))},methods:(0,r.default)((0,r.default)({addGoods:function(){"edit"===this.operating?uni.redirectTo({url:"/pages/topic/parse-goods?type=".concat(this.type,"&operating=edit&threadId=").concat(this.threadId)}):uni.redirectTo({url:"/pages/topic/parse-goods?type=".concat(this.type)})},deleteGoods:function(){this.dataGoodInfo=[],this.isShowGoods=!1},changeCheck:function(){},choosePosition:function(){this.currentPosition.location||(this.saveThread(),this.getPosition())},clearPosition:function(){this.currentPosition={}},saveThread:function(){var t=this;uni.removeStorageSync("current_thread"),1===this.type&&(this.textAreaValue=this.vditor.getValue());var e={};if(["postTitle","price","word","fileId","videoName","textAreaValue","categoryIndex","categoryId","checkClassData","uploadFile","videoBeforeList","audioBeforeList","checked","watchChecked","askingPrice","watchShow","priceAsk","beAskId","userImage","beUserName","type","showHidden","payType","showPayType","ioshide","dataGoodInfo"].forEach((function(i){t[i]&&(e[i]=t[i])})),this.$refs.uploadFiles){var i=this.$refs.uploadFiles.getValue(),o=[];i.forEach((function(t){o.push({fileName:t.attributes.fileName,url:t.attributes.url,_jv:{id:t.id}})})),e.attachmentList=o}if(this.$refs.upload){var a=this.$refs.upload.getValue();a.forEach((function(t,e){t.attributes&&(a[e]={path:t.attributes.thumbUrl,id:t.id,order:t.attributes.order,name:t.attributes.fileName,url:t.attributes.url})})),e.imgList=a}uni.setStorageSync("current_thread",JSON.stringify(e))},setThread:function(){var t=this,e=uni.getStorageSync("current_thread");e&&(e=JSON.parse(e),this.dataGoodInfo=e.dataGoodInfo,Object.getOwnPropertyNames(e).forEach((function(i){if("imgList"===i){var o=e[i];o.forEach((function(t,e){o[e]={thumbUrl:t.path,_jv:{id:t.id},order:t.order,fileName:t.name,url:t.url}}));var a={firstPost:{images:[]}};a.firstPost.images=e[i],t.setAnnex("img",a)}else t[i]=e[i]})),this.videoBeforeList.length>0&&(this.percent=1),uni.removeStorageSync("current_thread"))},focusEvent:function(){},toolBarClick:function(t){var e="";"bold"===t?(e="".concat("".concat(this.textAreaValue.slice(0,this.cursor),"**粗体文字**").concat(this.textAreaValue.slice(this.cursor))),this.cursor+=2,this.focusEvent(this.cursor)):"italic"===t?(e="".concat("".concat(this.textAreaValue.slice(0,this.cursor),"__").concat(this.textAreaValue.slice(this.cursor))),this.cursor+=1,this.focusEvent(this.cursor)):"title"===t?(e="".concat("".concat(this.textAreaValue.slice(0,this.cursor),"\n### ").concat(this.textAreaValue.slice(this.cursor))),this.cursor+=4,this.focusEvent(this.cursor)):"quote"===t?(e="".concat("".concat(this.textAreaValue.slice(0,this.cursor),"\n> ").concat(this.textAreaValue.slice(this.cursor))),this.cursor+=1,this.focusEvent(this.cursor)):"link"===t?(e="".concat("".concat(this.textAreaValue.slice(0,this.cursor),"[](url)").concat(this.textAreaValue.slice(this.cursor))),this.cursor+=1,this.focusEvent(this.cursor)):"code"===t?(e="".concat("".concat(this.textAreaValue.slice(0,this.cursor),"``").concat(this.textAreaValue.slice(this.cursor))),this.cursor+=1,this.focusEvent(this.cursor)):"strikethrough"===t&&(e="".concat("".concat(this.textAreaValue.slice(0,this.cursor),"~~~~").concat(this.textAreaValue.slice(this.cursor))),this.cursor+=2,this.focusEvent(this.cursor)),this.textAreaValue=e}},(0,c.mapMutations)({setAtMember:"atMember/SET_ATMEMBER"})),{},(n={checkNum:function(t){var e=this,i=t.target.value,o=i.indexOf(".");i.indexOf(".")<0&&""!=i?i.length>6?(i=i.substring(0,i.length-1),uni.showToast({title:e.c.TheAmountCannotExceedOneMillion,icon:"none"})):i=parseFloat(i):0==i.indexOf(".")?i=(i=i.replace(/[^$#$]/g,"0.")).replace(/\.{2,}/g,"."):/^(\d?)+(\.\d{0,2})?$/.test(i)||(i=i.substring(0,i.length-1)),e.$nextTick((function(){e.maxLength=-1==o?7:10,e.inputPrice=i}))},videoDel:function(){this.deleteType=2,this.$refs.deletePopup.open(),this.deleteTip=this.i18n.t("core.deleteVideoSure")},playVideo:function(t){uni.$emit("playVideo",t)},fullscreenchange:function(t){this.fullscreenStatus=t.detail.fullScreen,t.detail.fullScreen||(this.controlsStatus=!1,this.videoContext.pause())},emojiclick:function(){this.emojiShow=!this.emojiShow,this.textShow=!this.textShow},contBlur:function(t){this.cursor=t.detail.cursor},diaLogClose:function(){this.$refs.popup.close(),this.popupStatus=!1,this.textShow=!0},diaLogOk:function(){if(""===this.forums.set_site.site_minimum_amount){if(this.inputPrice<"0.1")return void uni.showToast({title:this.i18n.t("core.TheAmountCannotBeLessThanOneYuan"),icon:"none"})}else if(this.inputPrice<this.forums.set_site.site_minimum_amount)return void uni.showToast({title:this.i18n.t("core.TheAmountCannotBeLessThanMinMoney")+this.forums.set_site.site_minimum_amount+this.i18n.t("discuzq.post.yuan"),icon:"none"});if(5===this.type)return this.priceAsk=this.inputPrice,this.$refs.popup.close(),this.popupStatus=!1,this.textShow=!0,void this.postClick();"pay"===this.setType?this.price=this.inputPrice:this.word=this.inputWord,this.$refs.popup.close(),this.popupStatus=!1,this.textShow=!0},percentageClick:function(t){this.word=this.freepercentage[t].pay,this.percentagedisplay=this.freepercentage[t].name,this.setType="word",this.freewords=[],this.freewords.push(this.freepercentage[t]),this.$refs.popupBtm.close()},moneyClick:function(e){var i=this;if(0===this.forums.set_site.site_onlooker_price&&(this.watchShow=!1),0===e){if(5===this.type)return this.postClick(),void(this.watchShow=!1);1!==this.type&&5!==this.type&&(this.payType=0,0===this.payType&&(this.showPayType=this.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsFree")))}else this.watchShow=!0;if(this.setType="pay",this.payNumCheck=[],this.payNumCheck.push(this.payNum[e]),t.log(this.payNum),this.payNumCheck[0].name===this.i18n.t("discuzq.post.customize"))t.log("自定义金额"),this.textShow=!1,this.$refs.popupBtm.close(),this.popupStatus=!0,this.$nextTick((function(){i.inputPrice="",i.$refs.popup.open(),i.textShow=!1}));else{if(5===this.type&&0!==e)return this.priceAsk=this.payNumCheck[0].pay,this.$refs.popupBtm.close(),this.postClick(),void(this.textShow=!0);this.price=this.payNumCheck[0].pay,this.$refs.popupBtm.close(),this.textShow=!0}},lookPay:function(){this.$refs.lookPayPopup.open()},cancelLookPay:function(){this.$refs.lookPayPopup.close()},choicePayType:function(t){0===t?(this.payNumCheck=[],this.price="",this.showPayType=this.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsFree")):1===t?(this.payNumCheck=[],this.showPayType=this.i18n.t("discuzq.post.TheContentIsFreeAndTheAccessoriesArePaid"),this.payNum[0].name="￥1",this.payNum[0].pay=1):(this.payNumCheck=[],this.payNum[0].name="￥1",this.showPayType=this.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsPaid"),this.payNum[0].pay=1),this.payType=t,this.$refs.lookPayPopup.close()},cellClick:function(t){this.setType=t,this.$refs.popupBtm.open(),this.textShow=!1},postAnswerClick:function(t){this.$refs.popupBtm.open(),this.textShow=!1},cancel:function(){this.$refs.popupBtm.close(),this.textShow=!0},uploadClick:function(t){this.uploadStatus=t},uploadChange:function(t,e){this.uploadFile=t,this.uploadStatus=e},uploadClear:function(t,e){var i=t.id;this.deleteType=0,this.deleteId=i,this.deleteIndex=e,this.$refs.deletePopup.open(),this.deleteTip=this.i18n.t("core.deleteImgSure")},uploadAudioChange:function(t){this.audioBeforeList=t},audioDel:function(){this.deleteType=3,this.$refs.deletePopup.open(),this.deleteTip=this.i18n.t("core.deleteAudioSure")},getEmojiClick:function(t){var e;e="".concat(this.textAreaValue.slice(0,this.cursor)+t+this.textAreaValue.slice(this.cursor)),this.cursor=e.length,this.textAreaValue=e,this.emojiShow=!1,this.textShow=!0},callClick:function(){uni.navigateTo({url:"/pages/user/at-member"})},topicPage:function(){uni.navigateTo({url:"/pages/topic/topic"})},checkClass:function(t,e){this.categoryIndex=e,this.categoryId=t._jv.id,this.checkClassData=[],this.checkClassData.push(this.allCategories[e])},payClickShow:function(){var e=this;if(t.log("payClickshow"),this.$store.getters["session/get"]("isLogin")||(this.$store.dispatch("session/setUrl",this.curUrl),this.h5LoginMode()),this.payStatus=!1,this.forums.paycenter.wxpay_close){if(!this.forums.paycenter.wxpay_close||!this.forums.other.can_create_thread_paid)return this.ioshide=!1,void(this.payShowStatus=!1);this.ioshide=!0,this.payShowStatus=!0,this.payTypeText=this.t.pay+this.t.payAskingPrice,this.priceAsk=parseFloat(this.thread.price),this.$nextTick((function(){e.$refs.payShow.payClickShow(e.payTypeVal)}))}else this.payShowStatus=!1},paysureShow:function(t){if(uni.setStorage({key:"page",data:"/topic/post?type=5&categoryId=".concat(this.categoryid,"&categoryIndex=").concat(this.categoryindex)}),0===t){if(!0===this.isWeixin&&void 0===this.user.wechat)return void this.$refs.wechatPopup.open();if(!0===this.isWeixin&&this.user.wechat&&""===this.user.wechat.mp_openid)return void this.$refs.wechatPopup.open();this.creatOrder(this.priceAsk,5,"",t)}},onInput:function(t){this.value=t,this.creatOrder(this.priceAsk,5,t,1)},creatOrder:function(e,i,o,a){var n=this,s={_jv:{type:"orders"},type:i,payee_id:this.beAskId,amount:e,is_anonymous:this.checked?"0":"1"};this.$store.dispatch("jv/post",s).then((function(t){n.orderSn=t.order_sn,0===a?0==n.browser?n.orderPay(13,o,n.orderSn,a,"0"):n.isWeixin&&n.isPhone?n.orderPay(12,o,n.orderSn,a,"1"):n.isPhone?n.orderPay(20,o,n.orderSn,1,"2"):n.orderPay(10,o,n.orderSn,a,"3"):1===a&&n.orderPay(20,o,n.orderSn,a)})).catch((function(e){t.log(e)}))},orderPay:function(e,i,o,a,n){var s=this,r={};0===a?r={_jv:{type:"trade/pay/order/".concat(o)},payment_type:e}:1===a&&(r={_jv:{type:"trade/pay/order/".concat(o)},payment_type:e,pay_password:i}),this.$store.dispatch("jv/post",r).then((function(t){s.wxRes=t,0===a?"0"===n?s.wechatPay(t.wechat_js.timeStamp,t.wechat_js.nonceStr,t.wechat_js.package,t.wechat_js.signType,t.wechat_js.paySign):"1"===n?"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",s.onBridgeReady(t),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",s.onBridgeReady(t)),document.attachEvent("onWeixinJSBridgeReady",s.onBridgeReady(t))):s.onBridgeReady(t):"2"===n?s.postThread().then((function(e){s.postLoading=!1,uni.hideLoading(),t&&t.isApproved,t&&t._jv&&t._jv.json.data.id&&uni.redirectTo({url:"/topic/index?id=".concat(t._jv.json.data.id)})})):"3"===n&&t&&(s.codeUrl=t.wechat_qrcode,s.payShowStatus=!1,s.$refs.codePopup.open(),s.qrcodeShow=!0,m=setInterval((function(){1!==s.payStatus?(s.getOrderStatus(s.orderSn,n),uni.hideLoading()):clearInterval(m)}),3e3)):1===a&&("success"===t.wallet_pay.result&&(s.$store.dispatch("jv/get",["users/".concat(s.currentLoginId),{}]),s.coverLoading=!1,s.postThread().then((function(t){s.postLoading=!1,uni.hideLoading(),t&&t.isApproved,t&&t._jv.json.data.id&&uni.redirectTo({url:"/topic/index?id=".concat(t._jv.json.data.id)})}))),s.coverLoading=!1)})).catch((function(e){t.log(e),s.$refs.payShow.clearPassword()}))},getOrderStatus:function(e,i){var o=this;this.$store.dispatch("jv/get",["orders/".concat(e),{custom:{loading:!1}}]).then((function(t){o.payStatus=t.status,1===o.payStatus&&("2"===i||("3"===i?(o.$refs.codePopup.close(),o.qrcodeShow=!1,o.postThread()):("0"===i||"1"===i)&&o.postThread().then((function(t){o.postLoading=!1,uni.hideLoading(),t&&t.isApproved,t&&t._jv.json.data.id&&uni.redirectTo({url:"/topic/index?id=".concat(t._jv.json.data.id)})}))),o.$refs.toast.show({message:o.i18n.t("pay.paySuccess")}))})).catch((function(e){t.log(e),o.coverLoading=!1,o.$refs.toast.show({message:o.i18n.t("pay.payFail")})}))},wechatPay:function(t,e,i,o,a){var n=this;uni.requestPayment({provider:"wxpay",timeStamp:t,nonceStr:e,package:i,signType:o,paySign:a,success:function(t){n.coverLoading=!0,m=setInterval((function(){1!==n.payStatus?n.getOrderStatus(n.orderSn,"0"):clearInterval(m)}),3e3)},fail:function(t){n.payShowStatus=!1,n.coverLoading=!1,n.$refs.toast.show({message:n.p.payFail})}})},onBridgeReady:function(t){var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.wechat_js.appId,timeStamp:t.wechat_js.timeStamp,nonceStr:t.wechat_js.nonceStr,package:t.wechat_js.package,signType:"MD5",paySign:t.wechat_js.paySign},(function(t){"get_brand_wcpay_request:ok"==t.err_msg||("get_brand_wcpay_request:cancel"==t.err_msg||"get_brand_wcpay_request:fail"==t.err_msg)&&(clearInterval(m),resolve)})),m=setInterval((function(){1!==e.payStatus?e.getOrderStatus(e.orderSn,"1"):clearInterval(m)}),3e3)},radioChange:function(t){},postClick:function(){var e=this;if(this.payTypeText=this.i18n.t("topic.pay")+this.i18n.t("discuzq.post.payAskingPrice"),1===this.type&&(this.textAreaValue=this.vditor.getValue().replace(/blob\:/g,"").replace(/\n\n/g,"\n\n\n")),!this.categoryId)return this.$refs.toast.show({message:this.i18n.t("discuzq.post.theclassifyCanNotBeBlank")}),!1;var i=!0;switch(this.type){case 0:this.textAreaValue.length<1?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.theContentCanNotBeBlank")}),i=!1):i=!0;break;case 1:this.postTitle.length<1?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.theTitleCanNotBeBlank")}),i=!1):this.textAreaValue.length<1?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.theContentCanNotBeBlank")}),i=!1):this.uploadStatus?1===this.payType?0===this.$refs.uploadFiles.getValue().length?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.attachmentCannotBeEmpty")}),i=!1):0===this.price?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.priceCannotBeFree")}),i=!1):i=!0:2===this.payType&&0===this.price?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.priceCannotBeFree")}),i=!1):i=!0:(this.$refs.toast.show({message:this.i18n.t("discuzq.post.pleaseWaitForTheImageUploadToComplete")}),i=!1);break;case 2:this.videoBeforeList.length<1?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.videoCannotBeEmpty")}),i=!1):1!==this.percent?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.pleaseWaitForTheVideoUploadToComplete")}),i=!1):2===this.payType&&0===this.price?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.priceCannotBeFree")}),i=!1):i=!0;break;case 3:"edit"!==this.operating?this.uploadStatus?this.uploadFile.length<1?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.imageCannotBeEmpty")}),i=!1):2===this.payType&&0===this.price?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.priceCannotBeFree")}),i=!1):i=!0:(this.$refs.toast.show({message:this.i18n.t("discuzq.post.pleaseWaitForTheImageUploadToComplete")}),i=!1):this.uploadStatus?2===this.payType&&0===this.price?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.priceCannotBeFree")}),i=!1):i=!0:(this.$refs.toast.show({message:this.i18n.t("discuzq.post.pleaseWaitForTheImageUploadToComplete")}),i=!1);break;case 4:this.audioBeforeList.length<1?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.audioCannotBeEmpty")}),i=!1):i=!0;break;case 5:""===this.beAskId?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.pleaseSelectTheUserToBeAsked")}),i=!1):this.textAreaValue.length<1?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.theContentCanNotBeBlank")}),i=!1):this.watchShow&&(t.log(this.watchShow,"this.watchShow"),this.payShowStatus=!0,this.$nextTick((function(){e.$refs.payShow.payClickShow()})));break;case 6:t.log(this.dataGoodInfo.length,"^^^^~~~~~~~~"),""===this.dataGoodInfo||0===this.dataGoodInfo.length?(this.$refs.toast.show({message:this.i18n.t("core.productInformationDoesNotExist")}),i=!1):i=!0;break;default:i=!1,this.$refs.toast.show({message:this.i18n.t("core.postTypesDoNotMatch")})}if(i)if(5!==this.type&&(this.postLoading=!0,uni.showLoading()),"edit"===this.operating)3===this.type?this.uploadFile.length<1?(this.$refs.toast.show({message:this.i18n.t("discuzq.post.imageCannotBeEmpty")}),uni.hideLoading(),this.postLoading=!1):this.editThread().then((function(t){e.postLoading=!1,uni.hideLoading(),t&&e.threadId&&uni.redirectTo({url:"/topic/index?id=".concat(e.threadId)})})):(t.log("!!!!!!!~~~~~~~~~~~~~~~~~"),this.editThread().then((function(t){e.postLoading=!1,uni.hideLoading(),t&&e.threadId&&uni.redirectTo({url:"/topic/index?id=".concat(e.threadId)})})));else{if(this.forums.qcloud.qcloud_captcha&&this.forums.other.create_thread_with_captcha&&(!this.ticket||!this.randstr))return this.toTCaptcha(),!1;this.watchShow&&5===this.type||this.postThread().then((function(t){e.postLoading=!1,uni.hideLoading(),t&&1===t.isApproved&&e.$u.event.$emit("addThread",t),t&&t._jv.json.data.id&&uni.redirectTo({url:"/topic/index?id=".concat(t._jv.json.data.id)})}))}},setAnnex:function(e,i){switch(e){case"img":var o=[];i.firstPost.images.map((function(t){return o.push({path:t.thumbUrl,id:t._jv.id,order:t.order,name:t.fileName,url:t.url}),t})),this.filePreview=o;break;case"video":this.videoBeforeList.push({path:i.threadVideo.media_url});break;case"audio":this.audioBeforeList.push({fileName:i.threadAudio.file_name,url:i.threadAudio.media_url,id:i.threadAudio.file_id});break;case"goods":this.dataGoodInfo=i.firstPost.postGoods,-1!==i.firstPost.postGoods.price.indexOf("-")||Number(i.firstPost.postGoods.price)>0?this.dataGoodInfoPrice=i.firstPost.postGoods.price:Number(i.firstPost.postGoods.price)<=0&&(this.dataGoodInfoPrice="");break;default:t.log("没有匹配模式")}},addImg:function(){var t={data:[]};return this.uploadFile.forEach((function(e){e&&t.data.push({type:"attachments",id:e.id})})),t},addFile:function(){var t={data:[]};return this.$refs.uploadFiles.getValue().forEach((function(e){e.id&&t.data.push({type:"attachments",id:e.id})})),t},addQuestion:function(){return{data:{be_user_id:this.beAskId,price:this.priceAsk,is_onlooker:this.watchChecked,order_id:this.orderSn}}},deleteFile:function(t){this.deleteTip=this.i18n.t("core.deleteEnclosureSure"),this.$refs.deletePopup.open(),this.deleteType=1,this.deleteId=t},deleteFileSure:function(t){var e=this,i={_jv:{type:"attachments",id:t}};this.$store.dispatch("jv/delete",i).then((function(t){e.$refs.uploadFiles.deleteSure()}))},getCategories:function(){var t=this;this.$store.dispatch("jv/get",["categories?filter[createThread]=1",{}]).then((function(e){t.allCategories=e,e.map((function(e){return e._jv&&Number(e._jv.id)===Number(t.categoryId)&&t.checkClassData.push(e),e}))}))},postThread:function(){var e=this,i={_jv:{type:"threads",relationships:{category:{data:{type:"categories",id:this.checkClassData[0]._jv.id}}},links:{self:"threads?include=user,category,firstPost,firstPost.images,firstPost.postGoods,question,question.beUser,question.beUser.groups,question.images"}},content:this.textAreaValue,type:this.type,price:this.price,free_words:this.word,captcha_ticket:this.ticket,captcha_rand_str:this.randstr,is_anonymous:this.checked};1===this.payType?(i.attachment_price=this.price,i.price=""):0===this.payType&&(i.attachment_price="",i.price=this.price);var o=this.currentPosition;return i.longitude=o.longitude||"",i.latitude=o.latitude||"",i.location=o.location||"",i.address=o.address||"",new Promise((function(t,o){switch(e.type){case 0:t();break;case 1:i.title=e.postTitle,i._jv.relationships.attachments={data:e.addImg().data.concat(e.addFile().data)},t();break;case 2:i.file_id=e.fileId,i.file_name=e.videoName,t();break;case 3:i._jv.relationships.attachments=e.addImg(),t();break;case 4:i.file_id=e.audioBeforeList[0].id,i.file_name=e.audioBeforeList[0].fileName,t();break;case 5:i._jv.relationships.attachments=e.addImg(),i._jv.relationships.question=e.addQuestion(),t();break;case 6:i.post_goods_id=e.dataGoodInfo._jv.id,t();break;default:o(),e.$refs.toast.show({message:e.i18n.t("core.postTypesDoNotMatch")})}})).then((function(){return e.$store.dispatch("jv/post",i).then((function(t){return t})).catch((function(e){t.log(e)}))}))},delAttachments:function(t,e){if("edit"===this.operating){this.$u.event.$emit("deleteImg",{threadId:this.postDetails._jv.id,index:e});var i=this.$store.getters["jv/get"]("posts/".concat(this.postDetails.firstPost._jv.id));i.images.splice(e,1),i._jv.relationships.images.data.splice(e,1)}},handleClickOk:function(){this.$refs.deletePopup.close(),0===this.deleteType?(this.delAttachments(this.deleteId,this.deleteIndex),this.$refs.upload.clear(this.deleteIndex)):2===this.deleteType?(this.videoBeforeList=[],this.percent=0):3===this.deleteType&&(this.audioBeforeList=[])},handleClickCancel:function(){this.$refs.deletePopup.close()},handleWechatClickOk:function(){this.isWeixin?this.wxh5Login(0,0):uni.showToast({icon:"none",title:this.i18n.t("user.unLogin"),duration:2e3})},handleWechatClickCancel:function(){this.$refs.wechatPopup.close()}},(0,a.default)(n,"delAttachments",(function(e,i){if("edit"===this.operating){t.log("这是编辑"),this.$u.event.$emit("deleteImg",{threadId:this.postDetails._jv.id,index:i});var o=this.$store.getters["jv/get"]("posts/".concat(this.postDetails.firstPost._jv.id));o.images.splice(i,1),o._jv.relationships.images.data.splice(i,1)}this.uploadFile.forEach((function(t,i,o){t.id==e&&o.splice(i,1)}))})),(0,a.default)(n,"getSignature",(function(t){this.$store.dispatch("jv/get",["signature",{}]).then((function(e){t((function(){return e.signature}))}))})),(0,a.default)(n,"postVideo",(function(t){var e={_jv:{type:"thread/video"},file_id:t,type:0};this.$store.dispatch("jv/post",e)})),(0,a.default)(n,"getPostThread",(function(e){var i=this;this.$store.dispatch("jv/get",["threads/".concat(this.threadId),{params:{include:["firstPost","firstPost.images","threadVideo","threadAudio","category","firstPost.attachments","question","onlookers","question.beUser","question.images","firstPost.postGoods"]}}]).then((function(o){switch(o.question&&(i.beUserName=o.question.beUser.username,i.beAskId=o.question.beUser.id,i.userImage=o.question.beUser.avatarUrl),i.postDetails=o,i.firstPostId=o.firstPost._jv.id,i.type=o.type,1===i.type&&(i.markdownShow=!0),i.attachmentList=o.firstPost.attachments||[],i.textAreaValue=o.firstPost.content,i.categoryId=o.category._jv.id,i.checkClassData.push(o.category),o.threadVideo&&(i.fileId=o.threadVideo.file_id,i.percent=1),o.firstPost.images&&o.firstPost.images.forEach((function(t){t&&i.uploadFile.push({type:"attachments",id:t._jv.id,order:t.order,name:t.fileName,url:t.url,path:t.thumbUrl?t.thumbUrl:""})})),6===i.type&&o.firstPost.postGoods&&(i.dataGoodInfo=o.firstPost.postGoods,-1!==o.firstPost.postGoods.price.indexOf("-")||Number(o.firstPost.postGoods.price)>0?i.dataGoodInfoPrice=o.firstPost.postGoods.price:Number(o.firstPost.postGoods.price)<=0&&(i.dataGoodInfoPrice=""),i.isShowGoods=!0,t.log(i.dataGoodInfo,i.isShowGoods,"这是~~~~~~~~~~~~~~~")),i.loadStatus=!0,Number(o.price)>0?(i.price=o.price,i.word=o.freeWords,i.freepercentage.forEach((function(t){o.freeWords===t.pay&&(i.percentagedisplay=t.name)})),i.payType=2,i.showPayType=i.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsPaid"),1===i.type&&(i.payNum[0].name="￥1",i.payNum[0].pay=1)):Number(o.attachmentPrice)>0?(i.price=o.attachmentPrice,i.payType=1,i.showPayType=i.i18n.t("discuzq.post.TheContentIsFreeAndTheAccessoriesArePaid"),i.payNum[0].name="￥1",i.payNum[0].pay=1):i.showPayType=i.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsFree"),i.textAreaLength=1===i.type?49999:5e3,Number(o.type)){case 0:break;case 1:i.postTitle=o.title,i.setAnnex("img",o);break;case 2:i.percent=1,i.setAnnex("video",o);break;case 3:i.setAnnex("img",o);break;case 4:i.setAnnex("audio",o);break;case 6:i.setAnnex("goods",o);break;default:t.log("未知类型")}if(e.name){var a={},n=e.latng.split(",");a.longitude=n[1],a.latitude=n[0],a.location=e.name,a.address=e.addr,i.currentPosition=a}else i.currentPosition.longitude=o.longitude||"",i.currentPosition.latitude=o.latitude||"",i.currentPosition.location=o.location||"",i.currentPosition.address=o.address||"";"edit"===i.operating&&i.goodsId&&i.getGoodsInfo(),i.setThread()}))})),(0,a.default)(n,"getGoodsInfo",(function(){var e=this;t.log("获取"),this.$store.dispatch("jv/get","goods/".concat(this.goodsId)).then((function(i){t.log("这是取到的商品信息",i),e.dataGoodInfo=i,-1!==i.price.indexOf("-")||Number(i.price)>0?e.dataGoodInfoPrice=i.price:Number(i.price)<=0&&(e.dataGoodInfoPrice=""),e.isShowGoods=!0}))})),(0,a.default)(n,"editThread",(function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function i(){var o,a,n,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t.log("编辑"),o=0,a={_jv:{type:"posts",id:e.firstPostId,relationships:{},links:{self:"posts/".concat(e.firstPostId,"?include=user,thread,images")}},content:e.textAreaValue},n={_jv:{type:"threads",id:e.threadId,relationships:{category:{data:{type:"categories",id:e.checkClassData[0]._jv.id}}}}},s=e.currentPosition,n.longitude=s.longitude||"",n.latitude=s.latitude||"",n.location=s.location||"",n.address=s.address||"",i.t0=e.type,i.next=0===i.t0?12:1===i.t0?13:2===i.t0?18:3===i.t0?22:4===i.t0?25:5===i.t0?29:6===i.t0?31:35;break;case 12:return i.abrupt("break",36);case 13:return n.title=e.postTitle,1===e.payType?(n.attachment_price=e.price,n.price=""):2===e.payType?(n.attachment_price="",n.price=e.price):0===e.payType&&(n.attachment_price="",n.price=""),n.free_words=e.word,a._jv.relationships.attachments=e.addFile(),i.abrupt("break",36);case 18:return n.file_id=e.fileId,n.file_name=e.videoName,n.price=e.price,i.abrupt("break",36);case 22:return n.price=e.price,a._jv.relationships.attachments=e.addImg(),i.abrupt("break",36);case 25:return n.price=e.price,n.file_id=e.audioBeforeList[0].id,n.file_name=e.audioBeforeList[0].fileName,i.abrupt("break",36);case 29:return a._jv.relationships.attachments=e.addImg(),i.abrupt("break",36);case 31:return t.log("666666"),a.post_goods_id=e.dataGoodInfo._jv.id,t.log(n,"666666"),i.abrupt("break",36);case 35:return i.abrupt("break",36);case 36:return i.next=38,e.$store.dispatch("jv/patch",a).then((function(e){return t.log(e,"返回"),e._jv.json.data.id&&(o+=1),e._jv.json.data.attributes.isApproved,e}));case 38:return i.next=40,e.$store.dispatch("jv/patch",n).then((function(t){t._jv.json.data.id&&(o+=1)}));case 40:if(2!==o){i.next=42;break}return i.abrupt("return",o);case 42:throw new Error("出错了");case 43:case"end":return i.stop()}}),i)})))()})),(0,a.default)(n,"toTCaptcha",(function(){var t=this;this.captcha=new TencentCaptcha(this.forums.qcloud.qcloud_captcha_app_id,(function(e){0===e.ret&&(t.ticket=e.ticket,t.randstr=e.randstr,t.postClick()),2===e.ret&&(t.postLoading=!1,uni.hideLoading())})),this.captcha.show()})),(0,a.default)(n,"changeAvatar",(function(){uni.navigateTo({url:"/pages/user/at-member?name=select"})})),n)),onLoad:function(e){var i=this;t.log(e,"optionopton"),"5"===e.type&&(this.payNum[0].name=this.i18n.t("discuzq.post.noReward")),this.categoryid=e.categoryId,this.categoryindex=e.categoryIndex,uni.$on("radioChange",(function(t){i.beUserName=t.username,i.beAskId=t.id,i.userImage=t.avatarUrl})),this.forums&&this.forums.other&&(this.canUploadAttachment=this.forums.other.can_upload_attachments),this.forums&&this.forums.paycenter&&("edit"!==e.operating&&this.forums.paycenter.wxpay_close?this.showPayType=this.i18n.t("discuzq.post.TheContentAndTheAccessoriesIsFree"):this.askingPrice=!1),e.type&&(this.type=Number(e.type));var o=f.default.isWeixin().isWeixin;this.isWeixin=o,this.isPhone=f.default.isWeixin().isPhone,!1===this.isWeixin&&(this.payTypeData[0].hide=!0),this.browser=1,1===this.type&&uni.$on("vditor",(function(t,e){i.vditor=t,i.vditor.setValue(i.textAreaValue),e.setPostComponent(i)})),this.url=u.DISCUZ_REQUEST_HOST;var a=uni.getStorageSync("access_token");if(this.header={authorization:"Bearer ".concat(a)},this.formData={type:1},this.getCategories(),e.operating&&(this.operating=e.operating),e.threadId&&(this.threadId=e.threadId),e.categoryIndex&&("0"===e.categoryIndex?this.categoryIndex="":this.categoryIndex=Number(e.categoryIndex)),e.categoryId&&(this.categoryId=0===Number(e.categoryId)?"":Number(e.categoryId)),this.textAreaLength=1===Number(e.type)?49999:5e3,"edit"===this.operating)this.loadStatus=!1,this.getPostThread(e);else if(this.loadStatus=!0,e.name){var n={},s=e.latng.split(",");n.longitude=s[1],n.latitude=s[0],n.location=e.name,n.address=e.addr,this.currentPosition=n}try{uni.getSystemInfoSync();this.forums&&this.forums.paycenter.wxpay_close&&this.forums.other.can_create_thread_paid?(this.ioshide=!0,this.showHidden=!0):(this.ioshide=!1,this.showHidden=!1)}catch(t){}(1===this.type&&(this.markdownShow=!0),this.$u.event.$on("captchaResult",(function(t){i.ticket=t.ticket,i.randstr=t.randstr,i.postClick()})),this.$u.event.$on("closeChaReault",(function(){i.postLoading=!1,uni.hideLoading()})),uni.$on("clickTopic",(function(t){t.keywords&&(i.textAreaValue="".concat(i.textAreaValue.slice(0,i.cursor),"  #").concat(t.keywords.replace(/\s+/g,""),"#").concat(i.textAreaValue.slice(i.cursor),"  ")),i.cursor=i.textAreaValue?i.textAreaValue.length:0})),6===this.type&&(this.goodsId=e.goodsId,t.log(e,this.goodsId,"这是参数")),(6===this.type&&"edit"!==e.operating&&""!==e.threadId&&this.goodsId||6===this.type&&this.goodsId)&&this.getGoodsInfo(),2===this.type||3===this.type)&&this.getOpenerEventChannel().on("acceptDataFromOpenerPage",(function(t){3===i.type&&(t.map((function(t){i.uploadFile.push({type:"attachments",id:t.data.id,order:t.data.attributes.order,name:t.data.attributes.fileName,url:t.data.attributes.url,path:t.data.attributes.thumbUrl?t.data.attributes.thumbUrl:""}),i.filePreview.push({path:t.data.attributes.thumbUrl,id:t.data.id,order:t.data.attributes.order,name:t.data.attributes.fileName,url:t.data.attributes.url})})),i.addImg()),2===i.type&&t.data&&(t.data.doneResult?i.fileId=t.data.doneResult.fileId:i.fileId=t.data.result.fileId,i.videoBeforeList.push({path:t.data.uploadVideoRes.tempFilePath}),i.chooseType=0,i.percent=1)}))},onShow:function(){var t="";this.getAtMemberData.map((function(e){return t+="@".concat(e.username," ")})),this.textAreaValue="".concat(this.textAreaValue.slice(0,this.cursor)+t+this.textAreaValue.slice(this.cursor)),this.setAtMember([]),this.cursor=this.textAreaValue?this.textAreaValue.length:0,this.threadId||this.setThread()},onReady:function(){this.videoContext=uni.createVideoContext("video")},onUnload:function(){this.$u.event.$off("captchaResult"),this.$u.event.$off("closeChaReault"),this.$u.event.$off("radioChange"),this.$u.event.$off("radioEditChange"),uni.$off("clickTopic"),uni.$off("clickImage"),uni.$off("clickAttach"),this.captcha&&this.captcha.destroy(),clearInterval(m),clearInterval(null)}};e.default=v}).call(this,i("5a52").default)},e972:function(t,e,i){t.exports=i.p+"static/img/msg-404.e11dc2d7.svg"},ebde:function(t,e,i){var o=i("c4b7");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("4f06").default)("a0e1afb4",o,!0,{sourceMap:!1,shadowMode:!1})}}]);